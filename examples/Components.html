<!DOCTYPE html>
<html>

<head>
	<title>d3-ez : Reusable Components</title>
	<script src="https://d3js.org/d3.v4.min.js"></script>
	<script src="../test/d3-ez.js"></script>
	<link rel="stylesheet" type="text/css" href="../build/d3-ez.css" />
</head>

<body>
	<div id="chartholder"></div>

	<script type="text/javascript">
		// Generate some data
		var data = {
			"key": "Fruit",
			"values": [{
					"key": "Apples",
					"value": 9
				},
				{
					"key": "Oranges",
					"value": 3
				},
				{
					"key": "Grapes",
					"value": 5
				},
				{
					"key": "Bananas",
					"value": 7
				}
			]
		};

		var width = 600;
		var height = 400;

		var maxValue = d3.max(data.values, function(d) {
			return d.value;
		});
		var categoryNames = d3.values(data)[1].map(function(d) {
			return d.key;
		});

		// X & Y Scales
		var xScale = d3.scaleBand()
			.domain(categoryNames)
			.rangeRound([0, width])
			.padding(0.15);

		var yScale = d3.scaleLinear()
			.domain([0, maxValue])
			.range([height, 0]);

		// X & Y Axis
		var xAxis = d3.axisBottom(xScale);
		var yAxis = d3.axisLeft(yScale);

		var colors = ["#fb0007", "#fdb409", "#ffff0b", "#c3ff28"];
		var colorScale = d3.scaleOrdinal()
			.range(colors)
			.domain(categoryNames);

		var chart = d3.ez.component.barGrouped();
    var legend = d3.ez.component.legend().title("Fruit");
    var title = d3.ez.component.title().mainText("Fruit Survey").subText("Which do you like?");

		// Configure chart component
		var barChart = d3.ez.chart2()
			.chart(chart)
			.width(width)
			.height(height)
			.colorScale(colorScale)
			.yAxis(yAxis)
			.xAxis(xAxis)
			.legend(legend)
			.title(title)
			.on("customMouseOver", function(d, i) {
				console.log(d);
				d3.select("#message").text(d.value);
			});

		// Attach data and chart to 'chartholder' element
		d3.select("#chartholder")
			.datum(data.values)
			.call(barChart);
	</script>
</body>

</html>
