<!DOCTYPE html>
<html>

  <head>
    <title>d3-ez : Bar Chart (Circular) Example</title>
    <script src="https://d3js.org/d3.v5.min.js"></script>
    <script src="../dist/d3-ez.js"></script>
    <link rel="stylesheet" type="text/css" href="../dist/d3-ez.css" />
  </head>

  <body>
    <svg id="chartholder"></svg>
    <br />
    <div>Value: <span id="message"></span></div>

    <script type="text/javascript">
      d3.json("data/uk_elections.json").then(function(data) {
        // UK Election Results Source: http://www.ukpolitical.info/2015.htm

        var colors = ["#cc0000", "#3366cc", "#ff9900", "#ffcc00", "#03cc14", "#ff18c0"];

        // Create chart base
        var myChart = d3.ez.chart.barChartCircular()
          .width(1000)
          .height(600)
          .colors(colors)
          .on("customValueMouseOver", function(d) {
            d3.select("#message").text(d.value);
          })
          .on("customSeriesClick", function(d) {
            console.log(d);
          });

        // Add to page
        function update() {
          var i = Math.round(Math.random() * 2) + 1;
          d3.select("#chartholder")
            .datum([data[i]])  // TODO: Convert to support multi-series
            .call(myChart);
        }

        update();
        setInterval(update, 2000);
      });
    </script>
  </body>

</html>
