<!DOCTYPE html>
<html>

  <head>
    <title>d3-ez : Bubbles Test</title>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <script src="../../../dist/d3-ez.js"></script>
  </head>

  <body>
    <div id="chartholder"></div>

    <script type="text/javascript">
      var myData = [
        {
          key: "Europe", values: [
            { key: "UK", value: "1.8", x: "3.7", y: "76.4" },
            { key: "France", value: "1.2", x: "3.1", y: "72.5" },
            { key: "Spain", value: "1.3", x: "4.2", y: "75.4" }
          ]
        },
        {
          key: "Africa", values: [
            { key: "Kenya", value: "1.0", x: "2.0", y: "71.2" },
            { key: "Nigeria", value: "3.6", x: "4.1", y: "73.8" },
            { key: "Etheopia", value: "2.0", x: "4.9", y: "76.4" }
          ]
        },
        {
          key: "Asia", values: [
            { key: "India", value: "2.6", x: "3.5", y: "70.2" },
            { key: "China", value: "0.9", x: "2.9", y: "75.8" },
            { key: "Japan", value: "1.8", x: "4.2", y: "72.1" }
          ]
        }
      ];

      var height = 300;
      var width = 300;
      var minRadius = 3;
      var maxRadius = 25;

      var colors = ["#d34152", "#f4bc71", "#9bcf95"];
      var {
        rowKeys,
        coordinatesExtent: { x: xExtent, y: yExtent },
        valueExtent
      } = d3.ez.dataTransform(myData).summary();

      var xScale = d3.scaleLinear()
        .domain(xExtent)
        .range([0, width]);

      var yScale = d3.scaleLinear()
        .domain(yExtent)
        .range([height, 0]);

      var colorScale = d3.scaleOrdinal()
        .domain(rowKeys)
        .range(colors);

      console.log(valueExtent);
      var sizeScale = d3.scaleLinear()
        .domain(valueExtent)
        .range([minRadius, maxRadius]);

      // Configure chart component
      var myChart = d3.ez.component.bubbles()
        .xScale(xScale)
        .yScale(yScale)
        .colorScale(colorScale)
        .sizeScale(sizeScale)
        .opacity(0.8);

      // Attach data and chart to 'chartholder' element
      var svg = d3.select("#chartholder")
        .append("svg")
        .attr("width", width)
        .attr("height", height)
        .selectAll(".seriesGroup")
        .data(myData)
        .enter()
        .append("g")
        .classed("seriesGroup", true)
        .call(myChart);

    </script>
  </body>

</html>
