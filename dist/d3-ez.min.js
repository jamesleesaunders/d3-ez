(function(global,factory){typeof exports==="object"&&typeof module!=="undefined"?module.exports=factory(require("d3")):typeof define==="function"&&define.amd?define(["d3"],factory):(global=typeof globalThis!=="undefined"?globalThis:global||self,global.d3=global.d3||{},global.d3.ez=factory(global.d3))})(this,function(d3){"use strict";function _interopNamespaceDefault(e){var n=Object.create(null);if(e){Object.keys(e).forEach(function(k){if(k!=="default"){var d=Object.getOwnPropertyDescriptor(e,k);Object.defineProperty(n,k,d.get?d:{enumerable:true,get:function(){return e[k]}})}})}n.default=e;return Object.freeze(n)}var d3__namespace=_interopNamespaceDefault(d3);var name="d3-ez";var version$1="4.0.6";var description="D3 Easy Reusable Chart Library";var license$1="GPL-2.0";var keywords=["d3","d3-module","visualization","chart","graph","data","svg","dataviz"];var homepage="https://github.com/jamesleesaunders/d3-ez";var author$1="James Saunders (james@saunders-family.net)";var repository={type:"git",url:"https://github.com/jamesleesaunders/d3-ez.git"};var bugs={url:"https://github.com/jamesleesaunders/d3-ez/issues"};var type="module";var files=["dist/**/*.js","src/**/*.js"];var module="src/index.js";var main="src/index.js";var jsdelivr="dist/d3-ez.min.js";var unpkg="dist/d3-ez.min.js";var exports$1={umd:"./dist/d3-ez.min.js",default:"./src/index.js"};var scripts={build:"make",pretest:"make",test:"tape 'test/**/*Test.js' | tap-arc","build:docs":"jsdoc -c config/jsdoc.conf.json","deploy:docs":"npm run build:docs && gh-pages -d docs"};var devDependencies={"@babel/core":"^7.24.6","@babel/plugin-external-helpers":"^7.24.6","@babel/plugin-syntax-import-attributes":"^7.24.6","@babel/plugin-transform-object-assign":"^7.24.6","@babel/preset-env":"^7.24.6","@rollup/plugin-babel":"^6.0.4","@rollup/plugin-json":"^6.1.0","@rollup/plugin-node-resolve":"^15.2.3",eslint:"^9.3.0","gh-pages":"^6.1.1",jsdoc:"^4.0.3",jsdom:"^24.1.0",rollup:"^4.18.0","tap-arc":"^1.2.2",tape:"^5.7.5","toast-jsdoc":"^1.0.2","uglify-js":"^3.17.4",vows:"^0.8.3"};var dependencies={d3:"^7.9.0"};var peerDependencies={d3:"^7.9.0"};var packageJson={name:name,version:version$1,description:description,license:license$1,keywords:keywords,homepage:homepage,author:author$1,repository:repository,bugs:bugs,type:type,files:files,module:module,main:main,jsdelivr:jsdelivr,unpkg:unpkg,exports:exports$1,scripts:scripts,devDependencies:devDependencies,dependencies:dependencies,peerDependencies:peerDependencies};function componentBarsCircular(){var classed="barsCircular";var xScale;var yScale;var colorScale;var transition={ease:d3__namespace.easeLinear,duration:0};var dispatch=d3__namespace.dispatch("customValueMouseOver","customValueMouseOut","customValueClick","customSeriesMouseOver","customSeriesMouseOut","customSeriesClick");var opacity=1;var cornerRadius=2;function my(selection){selection.each(function(){var startAngle=d3__namespace.min(yScale.range());var arc=d3__namespace.arc().startAngle(startAngle*Math.PI/180).endAngle(function(d){return yScale(d.value)*Math.PI/180}).outerRadius(function(d){return xScale(d.key)+xScale.bandwidth()}).innerRadius(function(d){return xScale(d.key)}).cornerRadius(cornerRadius);var arcTween=function arcTween(d,j){this._current||(this._current={key:d.key,value:0});var i=d3__namespace.interpolate(this._current,d);this._current=i(0);return function(t){return arc(i(t))}};var seriesGroup=d3__namespace.select(this).on("mouseover",function(e,d){dispatch.call("customSeriesMouseOver",this,e,d)}).on("click",function(e,d){dispatch.call("customSeriesClick",this,e,d)});var componentGroup=seriesGroup.selectAll("g.".concat(classed)).data(function(d){return[d]}).enter().append("g").classed(classed,true).merge(seriesGroup);var bars=componentGroup.selectAll(".bar").data(function(d){return d.values});bars.enter().append("path").classed("bar",true).on("mouseover",function(e,d){dispatch.call("customValueMouseOver",this,e,d)}).on("click",function(e,d){dispatch.call("customValueClick",this,e,d)}).merge(bars).transition().ease(transition.ease).duration(transition.duration).attr("data-name",function(d){return d.key}).attr("d",arc).attrTween("d",arcTween).attr("fill",function(d){return colorScale(d.key)}).attr("fill-opacity",opacity).attr("stroke",function(d){return colorScale(d.key)}).attr("stroke-width","1px");bars.exit().transition().style("opacity",0).remove()})}my.xScale=function(_v){if(!arguments.length)return xScale;xScale=_v;return my};my.yScale=function(_v){if(!arguments.length)return yScale;yScale=_v;return my};my.colorScale=function(_v){if(!arguments.length)return colorScale;colorScale=_v;return my};my.opacity=function(_v){if(!arguments.length)return opacity;opacity=_v;return this};my.transition=function(_v){if(!arguments.length)return transition;transition=_v;return this};my.dispatch=function(_v){if(!arguments.length)return dispatch();dispatch=_v;return this};my.on=function(){var value=dispatch.on.apply(dispatch,arguments);return value===dispatch?my:value};return my}function componentBarsHorizontal(){var classed="bars";var xScale;var yScale;var colorScale;var transition={ease:d3__namespace.easeLinear,duration:0};var dispatch=d3__namespace.dispatch("customValueMouseOver","customValueMouseOut","customValueClick","customSeriesMouseOver","customSeriesMouseOut","customSeriesClick");var opacity=1;var cornerRadius=2;function my(selection){selection.each(function(){var seriesGroup=d3__namespace.select(this).on("mouseover",function(e,d){dispatch.call("customSeriesMouseOver",this,e,d)}).on("click",function(e,d){dispatch.call("customSeriesClick",this,e,d)});var componentGroup=seriesGroup.selectAll("g.".concat(classed)).data(function(d){return[d]}).enter().append("g").classed(classed,true).merge(seriesGroup);var bars=componentGroup.selectAll(".bar").data(function(d){return d.values});bars.enter().append("rect").classed("bar",true).attr("stroke-width","1px").attr("rx",cornerRadius).attr("ry",cornerRadius).on("mouseover",function(e,d){dispatch.call("customValueMouseOver",this,e,d)}).on("click",function(e,d){dispatch.call("customValueClick",this,e,d)}).attr("x",0).attr("y",function(d){return yScale(d.key)}).attr("height",yScale.bandwidth()).merge(bars).transition().ease(transition.ease).duration(transition.duration).attr("data-name",function(d){return d.key}).attr("fill",function(d){return colorScale(d.key)}).attr("fill-opacity",opacity).attr("stroke",function(d){return colorScale(d.key)}).attr("width",yScale.bandwidth()).attr("y",function(d){return yScale(d.key)}).attr("height",yScale.bandwidth()).attr("width",function(d){return xScale(d.value)});bars.exit().transition().ease(transition.ease).duration(transition.duration).style("opacity",0).remove()})}my.width=function(_v){if(!arguments.length)return width;width=_v;return this};my.height=function(_v){if(!arguments.length)return height;height=_v;return this};my.colorScale=function(_v){if(!arguments.length)return colorScale;colorScale=_v;return my};my.colors=function(_v){if(!arguments.length)return colors;colors=_v;return my};my.xScale=function(_v){if(!arguments.length)return xScale;xScale=_v;return my};my.yScale=function(_v){if(!arguments.length)return yScale;yScale=_v;return my};my.opacity=function(_v){if(!arguments.length)return opacity;opacity=_v;return this};my.transition=function(_v){if(!arguments.length)return transition;transition=_v;return this};my.dispatch=function(_v){if(!arguments.length)return dispatch();dispatch=_v;return this};my.on=function(){var value=dispatch.on.apply(dispatch,arguments);return value===dispatch?my:value};return my}function _arrayLikeToArray(r,a){(null==a||a>r.length)&&(a=r.length);for(var e=0,n=Array(a);e<a;e++)n[e]=r[e];return n}function _arrayWithHoles(r){if(Array.isArray(r))return r}function _arrayWithoutHoles(r){if(Array.isArray(r))return _arrayLikeToArray(r)}function _iterableToArray(r){if("undefined"!=typeof Symbol&&null!=r[Symbol.iterator]||null!=r["@@iterator"])return Array.from(r)}function _iterableToArrayLimit(r,l){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,n,i,u,a=[],f=!0,o=!1;try{if(i=(t=t.call(r)).next,0===l);else for(;!(f=(e=i.call(t)).done)&&(a.push(e.value),a.length!==l);f=!0);}catch(r){o=!0,n=r}finally{try{if(!f&&null!=t.return&&(u=t.return(),Object(u)!==u))return}finally{if(o)throw n}}return a}}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _slicedToArray(r,e){return _arrayWithHoles(r)||_iterableToArrayLimit(r,e)||_unsupportedIterableToArray(r,e)||_nonIterableRest()}function _toConsumableArray(r){return _arrayWithoutHoles(r)||_iterableToArray(r)||_unsupportedIterableToArray(r)||_nonIterableSpread()}function _unsupportedIterableToArray(r,a){if(r){if("string"==typeof r)return _arrayLikeToArray(r,a);var t={}.toString.call(r).slice(8,-1);return"Object"===t&&r.constructor&&(t=r.constructor.name),"Map"===t||"Set"===t?Array.from(r):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?_arrayLikeToArray(r,a):void 0}}function componentBarsVertical(){var classed="bars";var xScale;var yScale;var colorScale;var transition={ease:d3__namespace.easeLinear,duration:0};var dispatch=d3__namespace.dispatch("customValueMouseOver","customValueMouseOut","customValueClick","customSeriesMouseOver","customSeriesMouseOut","customSeriesClick");var opacity=1;var cornerRadius=2;function my(selection){selection.each(function(){var _d3$extent=d3__namespace.extent(yScale.domain()),_d3$extent2=_slicedToArray(_d3$extent,2),valueMin=_d3$extent2[0],valueMax=_d3$extent2[1];var height=d3__namespace.max(yScale.range());var seriesGroup=d3__namespace.select(this).on("mouseover",function(e,d){dispatch.call("customSeriesMouseOver",this,e,d)}).on("click",function(e,d){dispatch.call("customSeriesClick",this,e,d)});var componentGroup=seriesGroup.selectAll("g.".concat(classed)).data(function(d){return[d]}).enter().append("g").classed(classed,true).merge(seriesGroup);var bars=componentGroup.selectAll(".bar").data(function(d){return d.values});bars.enter().append("rect").classed("bar",true).attr("stroke-width","1px").attr("rx",cornerRadius).attr("ry",cornerRadius).on("mouseover",function(e,d){dispatch.call("customValueMouseOver",this,e,d)}).on("click",function(e,d){dispatch.call("customValueClick",this,e,d)}).attr("height",0).attr("width",xScale.bandwidth()).attr("x",function(d){return xScale(d.key)}).attr("y",height).merge(bars).transition().ease(transition.ease).duration(transition.duration).attr("data-name",function(d){return d.key}).attr("x",function(d){return xScale(d.key)}).attr("y",function(d){return d.value<0?yScale(0):yScale(d.value)}).attr("width",xScale.bandwidth()).attr("height",function(d){return d.value<0?yScale(d.value+valueMax):height-yScale(d.value+valueMin)}).attr("fill",function(d){return colorScale(d.key)}).attr("fill-opacity",opacity).attr("stroke",function(d){return colorScale(d.key)});bars.exit().transition().ease(transition.ease).duration(transition.duration).style("opacity",0).remove()})}my.xScale=function(_v){if(!arguments.length)return xScale;xScale=_v;return my};my.yScale=function(_v){if(!arguments.length)return yScale;yScale=_v;return my};my.colorScale=function(_v){if(!arguments.length)return colorScale;colorScale=_v;return my};my.opacity=function(_v){if(!arguments.length)return opacity;opacity=_v;return this};my.transition=function(_v){if(!arguments.length)return transition;transition=_v;return this};my.dispatch=function(_v){if(!arguments.length)return dispatch();dispatch=_v;return this};my.on=function(){var value=dispatch.on.apply(dispatch,arguments);return value===dispatch?my:value};return my}function componentBarsVerticalStacked(){var classed="bars";var xScale;var yScale;var colorScale;var transition={ease:d3__namespace.easeLinear,duration:0};var dispatch=d3__namespace.dispatch("customValueMouseOver","customValueMouseOut","customValueClick","customSeriesMouseOver","customSeriesMouseOut","customSeriesClick");var opacity=1;var cornerRadius=2;function my(selection){selection.each(function(){var height=d3__namespace.max(yScale.range());var width=xScale.bandwidth();var _d3$extent=d3__namespace.extent(yScale.domain()),_d3$extent2=_slicedToArray(_d3$extent,2),valueMin=_d3$extent2[0],valueMax=_d3$extent2[1];var stacker=function stacker(data){var series=[];var y0=0;var y1=0;var yn0=0;var yn1=0;data.forEach(function(d,i){if(d.value<0){yn1=yn1+d.value;series[i]={key:d.key,value:d.value,y1:yn0,y0:yn1};yn0+=d.value}else{y1=y0+d.value;series[i]={key:d.key,value:d.value,y0:y0,y1:y1};y0+=d.value}});return series};var seriesGroup=d3__namespace.select(this).on("mouseover",function(e,d){dispatch.call("customSeriesMouseOver",this,e,d)}).on("click",function(e,d){dispatch.call("customSeriesClick",this,e,d)});var componentGroup=seriesGroup.selectAll("g.".concat(classed)).data(function(d){return[d]}).enter().append("g").classed(classed,true).merge(seriesGroup);var bars=componentGroup.selectAll(".bar").data(function(d){return stacker(d.values)});bars.enter().append("rect").classed("bar",true).attr("stroke-width","1px").attr("rx",cornerRadius).attr("ry",cornerRadius).on("mouseover",function(e,d){dispatch.call("customValueMouseOver",this,e,d)}).on("click",function(e,d){dispatch.call("customValueClick",this,e,d)}).attr("height",0).attr("width",xScale.bandwidth()).attr("x",0).attr("y",height).merge(bars).transition().ease(transition.ease).duration(transition.duration).attr("data-name",function(d){return d.key}).attr("x",0).attr("y",function(d){return yScale(d.y1)}).attr("width",width).attr("height",function(d){var padding=3;return(d.value<0?yScale(d.value+valueMax):height-yScale(d.value+valueMin))-padding}).attr("fill",function(d){return colorScale(d.key)}).attr("fill-opacity",opacity).attr("stroke",function(d){return colorScale(d.key)});bars.exit().transition().style("opacity",0).remove()})}my.xScale=function(_v){if(!arguments.length)return xScale;xScale=_v;return my};my.yScale=function(_v){if(!arguments.length)return yScale;yScale=_v;return my};my.colorScale=function(_v){if(!arguments.length)return colorScale;colorScale=_v;return my};my.opacity=function(_v){if(!arguments.length)return opacity;opacity=_v;return this};my.transition=function(_v){if(!arguments.length)return transition;transition=_v;return this};my.dispatch=function(_v){if(!arguments.length)return dispatch();dispatch=_v;return this};my.on=function(){var value=dispatch.on.apply(dispatch,arguments);return value===dispatch?my:value};return my}function componentLabeledNode(){var classed="labeledNode";var color="steelblue";var opacity=1;var strokeColor="#000000";var strokeWidth=1;var radius=8;var label;var display="block";var fontSize=10;var transition={ease:d3__namespace.easeLinear,duration:0};var dispatch=d3__namespace.dispatch("customValueMouseOver","customValueMouseOut","customValueClick");function my(selection){function sizeAccessor(_){return typeof radius==="function"?radius(_):radius}selection.each(function(data){var r=sizeAccessor(data);var circle=d3__namespace.select(this).classed(classed,true).selectAll("circle").data([data]);circle.enter().append("circle").merge(circle).transition().ease(transition.ease).duration(transition.duration).attr("r",function(d){return sizeAccessor(d)}).attr("fill-opacity",opacity).style("stroke",color).style("stroke-width",strokeWidth).style("fill",color);var text=d3__namespace.select(this).classed(classed,true).selectAll("text").data([data]);text.enter().append("text").merge(text).attr("fill","currentColor").attr("alignment-baseline","middle").style("text-anchor","end").transition().ease(transition.ease).duration(transition.duration).text(label).attr("dx",-r).attr("dy",-r).style("display",display).style("font-size",fontSize+"px")})}my.color=function(_v){if(!arguments.length)return color;color=_v;return this};my.opacity=function(_v){if(!arguments.length)return opacity;opacity=_v;return this};my.radius=function(_v){if(!arguments.length)return radius;radius=_v;return this};my.label=function(_v){if(!arguments.length)return label;label=_v;return this};my.display=function(_v){if(!arguments.length)return display;display=_v;return this};my.fontSize=function(_v){if(!arguments.length)return fontSize;fontSize=_v;return this};my.stroke=function(_width,_color){if(!arguments.length)return[strokeWidth,strokeColor];strokeWidth=_width;strokeColor=_color;return this};my.transition=function(_v){if(!arguments.length)return transition;transition=_v;return this};my.dispatch=function(_v){if(!arguments.length)return dispatch();dispatch=_v;return this};my.on=function(){var value=dispatch.on.apply(dispatch,arguments);return value===dispatch?my:value};return my}function componentBubbles(){var classed="bubbles";var xScale;var yScale;var colorScale;var sizeScale;var transition={ease:d3__namespace.easeLinear,duration:0};var dispatch=d3__namespace.dispatch("customValueMouseOver","customValueMouseOut","customValueClick","customSeriesMouseOver","customSeriesMouseOut","customSeriesClick");var opacity=1;function my(selection){selection.each(function(data){d3__namespace.max(yScale.range());var seriesGroup=d3__namespace.select(this).on("mouseover",function(e,d){dispatch.call("customSeriesMouseOver",this,e,d)}).on("click",function(e,d){dispatch.call("customSeriesClick",this,e,d)});var componentGroup=seriesGroup.selectAll("g.".concat(classed)).data(function(d){return[d]}).enter().append("g").classed(classed,true).merge(seriesGroup);var bubble=componentLabeledNode().radius(function(d){return sizeScale(d.value)}).color(colorScale(data.key)).label(function(d){return d.key}).display("none").opacity(opacity).stroke(1,"white").transition(transition).dispatch(dispatch);var bubbles=componentGroup.selectAll(".bubble").data(function(d){return d.values});bubbles.enter().append("g").classed("bubble",true).on("mouseover",function(e,d){d3__namespace.select(this).select("text").style("display","block");dispatch.call("customValueMouseOver",this,e,d)}).on("mouseout",function(){d3__namespace.select(this).select("text").style("display","none")}).on("click",function(e,d){dispatch.call("customValueClick",this,e,d)}).attr("transform",function(d){return"translate(".concat(xScale(d.x),",").concat(yScale(d.y),")")}).merge(bubbles).transition().ease(transition.ease).duration(transition.duration).attr("data-name",function(d){return d.key}).attr("transform",function(d){return"translate(".concat(xScale(d.x),",").concat(yScale(d.y),")")}).call(bubble);bubbles.exit().transition().ease(transition.ease).duration(transition.duration).style("opacity",0).remove()})}my.xScale=function(_v){if(!arguments.length)return xScale;xScale=_v;return my};my.yScale=function(_v){if(!arguments.length)return yScale;yScale=_v;return my};my.colorScale=function(_v){if(!arguments.length)return colorScale;colorScale=_v;return my};my.sizeScale=function(_v){if(!arguments.length)return sizeScale;sizeScale=_v;return my};my.opacity=function(_v){if(!arguments.length)return opacity;opacity=_v;return this};my.transition=function(_v){if(!arguments.length)return transition;transition=_v;return this};my.dispatch=function(_v){if(!arguments.length)return dispatch();dispatch=_v;return this};my.on=function(){var value=dispatch.on.apply(dispatch,arguments);return value===dispatch?my:value};return my}function componentCandleSticks(){var classed="candleSticks";var xScale;var yScale;var colorScale;var transition={ease:d3__namespace.easeLinear,duration:0};var dispatch=d3__namespace.dispatch("customValueMouseOver","customValueMouseOut","customValueClick","customSeriesMouseOver","customSeriesMouseOut","customSeriesClick");var candleWidth=8;var opacity=1;var cornerRadius=2;function my(selection){selection.each(function(){var isUpDay=function isUpDay(d){return d.close>d.open};var line=d3__namespace.line().x(function(d){return d.x}).y(function(d){return d.y});var highLowLines=function highLowLines(bars){var paths=bars.selectAll(".high-low-line").data(function(d){return[d]});paths.enter().append("path").classed("high-low-line",true).merge(paths).transition().ease(transition.ease).duration(transition.duration).attr("d",function(d){return line([{x:xScale(d.date),y:yScale(d.high)},{x:xScale(d.date),y:yScale(d.low)}])});return bars};var openCloseBars=function openCloseBars(candle){var rect=candle.selectAll(".open-close-bar").data(function(d){return[d]});rect.enter().append("rect").classed("open-close-bar",true).attr("x",function(d){return xScale(d.date)-candleWidth/2}).attr("y",function(d){var isUp=isUpDay(d);var base=isUp?yScale(d.close):yScale(d.open);var difference=isUp?yScale(d.open)-yScale(d.close):0;return base+difference}).attr("width",candleWidth).attr("rx",cornerRadius).attr("ry",cornerRadius).merge(rect).transition().ease(transition.ease).duration(transition.duration).attr("x",function(d){return xScale(d.date)-candleWidth/2}).attr("y",function(d){return isUpDay(d)?yScale(d.close):yScale(d.open)}).attr("width",candleWidth).attr("height",function(d){return isUpDay(d)?yScale(d.open)-yScale(d.close):yScale(d.close)-yScale(d.open)});return candle};var seriesGroup=d3__namespace.select(this).on("mouseover",function(e,d){dispatch.call("customSeriesMouseOver",this,e,d)}).on("click",function(e,d){dispatch.call("customSeriesClick",this,e,d)});var componentGroup=seriesGroup.selectAll("g.".concat(classed)).data(function(d){return[d]}).enter().append("g").classed(classed,true).merge(seriesGroup);var candles=componentGroup.selectAll(".candle").data(function(d){return d.values});candles.enter().append("g").classed("candle",true).on("mouseover",function(e,d){dispatch.call("customValueMouseOver",this,e,d)}).on("click",function(e,d){dispatch.call("customValueClick",this,e,d)}).merge(candles).attr("data-name",function(d){return d.date}).attr("fill",function(d){return colorScale(isUpDay(d))}).attr("stroke",function(d){return colorScale(isUpDay(d))}).attr("fill-opacity",opacity).call(highLowLines).call(openCloseBars);candles.exit().remove()})}my.xScale=function(_v){if(!arguments.length)return xScale;xScale=_v;return my};my.yScale=function(_v){if(!arguments.length)return yScale;yScale=_v;return my};my.colorScale=function(_v){if(!arguments.length)return colorScale;colorScale=_v;return my};my.candleWidth=function(_v){if(!arguments.length)return candleWidth;candleWidth=_v;return my};my.opacity=function(_v){if(!arguments.length)return opacity;opacity=_v;return this};my.transition=function(_v){if(!arguments.length)return transition;transition=_v;return this};my.dispatch=function(_v){if(!arguments.length)return dispatch();dispatch=_v;return this};my.on=function(){var value=dispatch.on.apply(dispatch,arguments);return value===dispatch?my:value};return my}function componentCircularAxis(){var classed="circularAxis";var radialScale;var ringScale;var transition={ease:d3__namespace.easeLinear,duration:0};var dispatch=d3__namespace.dispatch("customValueMouseOver","customValueMouseOut","customValueClick","customSeriesMouseOver","customSeriesMouseOut","customSeriesClick");var showAxis=false;function my(selection){selection.each(function(){var _ringScale$range=ringScale.range(),_ringScale$range2=_slicedToArray(_ringScale$range,2);_ringScale$range2[0];var radius=_ringScale$range2[1];var axisSelect=d3__namespace.select(this).selectAll("g.".concat(classed)).data([0]);var axis=axisSelect.enter().append("g").classed(classed,true).on("click",function(e,d){dispatch.call("customValueClick",this,e,d)}).merge(axisSelect);var outerCircle=axis.selectAll(".outerCircle").data([radius]);outerCircle.enter().append("circle").classed("outerCircle",true).merge(outerCircle).transition().ease(transition.ease).duration(transition.duration).attr("r",function(d){return d}).style("fill","none").attr("stroke-width",2).attr("stroke","currentColor");var tickData=function tickData(){var tickArray,tickPadding;if(typeof ringScale.ticks==="function"){tickArray=ringScale.ticks();tickPadding=0}else{tickArray=ringScale.domain();tickPadding=ringScale.bandwidth()/2}return tickArray.map(function(d){return{value:d,radius:ringScale(d),padding:tickPadding}})};var tickCirclesGroupSelect=axis.selectAll(".tickCircles").data(function(){return[tickData()]});var tickCirclesGroup=tickCirclesGroupSelect.enter().append("g").classed("tickCircles",true).merge(tickCirclesGroupSelect);var tickCircles=tickCirclesGroup.selectAll("circle").data(function(d){return d});tickCircles.enter().append("circle").style("fill","none").attr("stroke","currentColor").attr("stroke-width",1).attr("stroke-dasharray","1,1").attr("opacity",.5).merge(tickCircles).transition().ease(transition.ease).duration(transition.duration).attr("r",function(d){return d.radius+d.padding});tickCircles.exit().remove();var spokeData=function spokeData(){var spokeArray=[];var spokeCount=0;if(typeof radialScale.ticks==="function"){var min=d3__namespace.min(radialScale.domain());var max=d3__namespace.max(radialScale.domain());spokeCount=radialScale.ticks().length;var spokeIncrement=(max-min)/spokeCount;for(var i=0;i<=spokeCount;i++){spokeArray[i]=(spokeIncrement*i).toFixed(0)}}else{spokeArray=radialScale.domain();spokeCount=spokeArray.length;spokeArray.push("")}var spokeScale=d3__namespace.scaleLinear().domain([0,spokeCount]).range(radialScale.range());return spokeArray.map(function(d,i){return{value:d,rotate:spokeScale(i)}})};var spokeGroup=axis.selectAll(".spokes").data(function(){return[spokeData()]});var spokeGroupEnter=spokeGroup.enter().append("g").classed("spokes",true).merge(spokeGroup);var spokes=spokeGroupEnter.selectAll("line").data(function(d){return d});spokes.enter().append("line").attr("stroke","currentColor").attr("stroke-width",1).attr("stroke-dasharray","2,2").attr("opacity",.5).merge(spokes).attr("transform",function(d){return"rotate(".concat(d.rotate,")")}).attr("y2",-radius);spokes.exit().remove();if(showAxis){var verticalAxis=d3__namespace.axisLeft(ringScale);axis.call(verticalAxis)}})}my.radialScale=function(_v){if(!arguments.length)return radialScale;radialScale=_v;return my};my.ringScale=function(_v){if(!arguments.length)return ringScale;ringScale=_v;return my};my.showAxis=function(_v){if(!arguments.length)return showAxis;showAxis=_v;return my};my.transition=function(_v){if(!arguments.length)return transition;transition=_v;return this};return my}function componentCircularRingLabels(){var classed="circularRingLabels";var radialScale;var transition={ease:d3__namespace.easeLinear,duration:0};var capitalizeLabels=false;var textAnchor="middle";function my(selection){selection.each(function(){var pathGen=function pathGen(d){var r=radialScale(d);var arc=d3__namespace.arc().outerRadius(r).innerRadius(r);var pathConf={startAngle:0*Math.PI/180,endAngle:360*Math.PI/180};var pathStr=arc(pathConf).split(/[A-Z]/);return"M"+pathStr[1]+"A"+pathStr[2]};var element=d3__namespace.select(this);var uId="uid-"+Math.floor(1e3+Math.random()*9e3);var labels=element.selectAll("g.".concat(classed)).data([0]);var labelsEnter=labels.enter().append("g").classed(classed,true).merge(labels);var radData=radialScale.domain();var def=labelsEnter.selectAll("def").data(radData);def.enter().append("def").append("path").attr("id",function(d,i){return"".concat(uId,"-path-").concat(i)}).attr("d",function(d){return pathGen(d)}).merge(def).transition().ease(transition.ease).duration(transition.duration).select("path").attr("d",function(d){return pathGen(d)}).attr("id",function(d,i){return"".concat(uId,"-path-").concat(i)});var text=labelsEnter.selectAll("text").data(radData);text.enter().append("text").style("text-anchor","start").attr("dy",-2).attr("dx",5).append("textPath").attr("xlink:href",function(d,i){return"#".concat(uId,"-path-").concat(i)}).attr("startOffset","0%").attr("font-size",function(d){var fontPx=radialScale.bandwidth()*.5;return"".concat(fontPx,"px")}).text(function(d){return d}).merge(text).transition().ease(transition.ease).duration(transition.duration).select("textPath").attr("font-size",function(d){var fontPx=radialScale.bandwidth()*.5;return"".concat(fontPx,"px")}).attr("xlink:href",function(d,i){return"#".concat(uId,"-path-").concat(i)});text.exit().remove()})}my.capitalizeLabels=function(_v){if(!arguments.length)return capitalizeLabels;capitalizeLabels=_v;return this};my.radialScale=function(_v){if(!arguments.length)return radialScale;radialScale=_v;return my};my.textAnchor=function(_v){if(!arguments.length)return textAnchor;textAnchor=_v;return this};my.transition=function(_v){if(!arguments.length)return transition;transition=_v;return this};return my}function componentCircularSectorLabels(){var classed="circularSectorLabels";var radialScale;var ringScale;var transition={ease:d3__namespace.easeLinear,duration:0};var capitalizeLabels=false;var textAnchor="middle";function my(selection){selection.each(function(){textAnchor="start";var _ringScale$range=ringScale.range(),_ringScale$range2=_slicedToArray(_ringScale$range,2);_ringScale$range2[0];var radius=_ringScale$range2[1];var tickData=function tickData(){var tickCount=0;var tickArray=[];if(typeof radialScale.ticks==="function"){var min=d3__namespace.min(radialScale.domain());var max=d3__namespace.max(radialScale.domain());tickCount=radialScale.ticks().length;var tickIncrement=(max-min)/tickCount;for(var i=0;i<=tickCount;i++){tickArray[i]=(tickIncrement*i).toFixed(0)}}else{tickArray=radialScale.domain();tickCount=tickArray.length}var tickScale=d3__namespace.scaleLinear().domain([0,tickCount]).range(radialScale.range());return tickArray.map(function(d,i){return{value:d,offset:tickScale(i)/360*100}})};var element=d3__namespace.select(this);var uId="uid-"+Math.floor(1e3+Math.random()*9e3);var labels=element.selectAll("g.".concat(classed)).data(function(){return[tickData()]});var labelsEnter=labels.enter().append("g").classed(classed,true).attr("transform",function(){var offset=typeof radialScale.ticks!=="function"?radialScale.bandwidth()/2:0;return"rotate(".concat(offset,")")}).merge(labels);var def=labelsEnter.selectAll("def").data([radius]);def.enter().append("def").append("path").attr("id",function(){return"".concat(uId,"-path")}).attr("d",function(d){var r=d*1.04;return"m0 "+-r+" a"+r+" "+r+" 0 1,1 -0.01 0"}).merge(def).transition().ease(transition.ease).duration(transition.duration).select("path").attr("id",function(){return"".concat(uId,"-path")}).attr("d",function(d){var r=d*1.04;return"m0 "+-r+" a"+r+" "+r+" 0 1,1 -0.01 0"});def.exit().remove();var text=labelsEnter.selectAll(".sectorLabel").data(function(d){return d});text.enter().append("text").classed("sectorLabel",true).attr("font-size","0.71em").attr("color","currentColor").style("text-anchor",textAnchor).append("textPath").attr("xlink:href",function(){return"#".concat(uId,"-path")}).text(function(d){var text=d.value;return capitalizeLabels?text.toUpperCase():text}).attr("startOffset",function(d){return d.offset+"%"}).attr("fill","currentColor").merge(text).transition().ease(transition.ease).duration(transition.duration).select("textPath").text(function(d){var text=d.value;return capitalizeLabels?text.toUpperCase():text}).attr("xlink:href",function(){return"#".concat(uId,"-path")}).attr("startOffset",function(d){return d.offset+"%"}).attr("id",function(d){return d.value});text.exit().remove()})}my.radialScale=function(_v){if(!arguments.length)return radialScale;radialScale=_v;return my};my.ringScale=function(_v){if(!arguments.length)return ringScale;ringScale=_v;return this};my.capitalizeLabels=function(_v){if(!arguments.length)return capitalizeLabels;capitalizeLabels=_v;return this};my.textAnchor=function(_v){if(!arguments.length)return textAnchor;textAnchor=_v;return this};my.transition=function(_v){if(!arguments.length)return transition;transition=_v;return this};return my}function componentDonut(){var classed="donut";var xScale;var yScale;var colorScale;var transition={ease:d3__namespace.easeLinear,duration:0};var dispatch=d3__namespace.dispatch("customValueMouseOver","customValueMouseOut","customValueClick","customSeriesMouseOver","customSeriesMouseOut","customSeriesClick");var opacity=1;var cornerRadius=2;function my(selection){selection.each(function(){var _xScale$range=xScale.range(),_xScale$range2=_slicedToArray(_xScale$range,2),innerRadius=_xScale$range2[0],radius=_xScale$range2[1];var _yScale$range=yScale.range(),_yScale$range2=_slicedToArray(_yScale$range,2),startAngle=_yScale$range2[0],endAngle=_yScale$range2[1];var pie=d3__namespace.pie().startAngle(startAngle*Math.PI/180).endAngle(endAngle*Math.PI/180).value(function(d){return d.value}).sort(null).padAngle(.015);var arc=d3__namespace.arc().innerRadius(innerRadius).outerRadius(radius).cornerRadius(cornerRadius);var arcTween=function arcTween(d){var i=d3__namespace.interpolate(d.startAngle,d.endAngle);return function(t){d.endAngle=i(t);return arc(d)}};var seriesGroup=d3__namespace.select(this).on("mouseover",function(e,d){dispatch.call("customSeriesMouseOver",this,e,d)}).on("click",function(e,d){dispatch.call("customSeriesClick",this,e,d)});var componentGroup=seriesGroup.selectAll("g.".concat(classed)).data(function(d){return[d]}).enter().append("g").classed(classed,true).merge(seriesGroup);var slices=componentGroup.selectAll("path.slice").data(function(d){return pie(d.values)});slices.enter().append("path").attr("class","slice").on("mouseover",function(e,d){dispatch.call("customValueMouseOver",this,e,d)}).on("click",function(e,d){dispatch.call("customValueClick",this,e,d)}).merge(slices).transition().duration(transition.duration).ease(transition.ease).attr("data-name",function(d){return d.data.key}).attr("d",arc).attrTween("d",arcTween).attr("fill",function(d){return colorScale(d.data.key)}).attr("fill-opacity",opacity).attr("stroke",function(d){return colorScale(d.data.key)}).attr("stroke-width","1px");slices.exit().remove()})}my.xScale=function(_v){if(!arguments.length)return xScale;xScale=_v;return my};my.yScale=function(_v){if(!arguments.length)return yScale;yScale=_v;return my};my.colorScale=function(_v){if(!arguments.length)return colorScale;colorScale=_v;return my};my.opacity=function(_v){if(!arguments.length)return opacity;opacity=_v;return this};my.transition=function(_v){if(!arguments.length)return transition;transition=_v;return this};my.dispatch=function(_v){if(!arguments.length)return dispatch();dispatch=_v;return this};my.on=function(){var value=dispatch.on.apply(dispatch,arguments);return value===dispatch?my:value};return my}function componentDonutLabels(){var classed="donutLabels";var xScale;var yScale;var transition={ease:d3__namespace.easeLinear,duration:0};function my(selection){selection.each(function(){var _xScale$range=xScale.range(),_xScale$range2=_slicedToArray(_xScale$range,2),innerRadius=_xScale$range2[0],radius=_xScale$range2[1];var _yScale$range=yScale.range(),_yScale$range2=_slicedToArray(_yScale$range,2),startAngle=_yScale$range2[0],endAngle=_yScale$range2[1];var pie=d3__namespace.pie().startAngle(startAngle*Math.PI/180).endAngle(endAngle*Math.PI/180).value(function(d){return d.value}).sort(null).padAngle(.015);var arc=d3__namespace.arc().innerRadius(innerRadius).outerRadius(radius);var outerArc=d3__namespace.arc().innerRadius(radius*.9).outerRadius(radius*.9);var midAngle=function midAngle(d){return d.startAngle+(d.endAngle-d.startAngle)/2};var seriesGroup=d3__namespace.select(this);var componentGroup=seriesGroup.selectAll("g.".concat(classed)).data(function(d){return[d]}).enter().append("g").classed(classed,true).merge(seriesGroup);var labelsGroup=componentGroup.selectAll("g.labels").data(function(d){return[d]});var labelsGroupEnter=labelsGroup.enter().append("g").attr("class","labels").merge(labelsGroup);var labels=labelsGroupEnter.selectAll("text.donutLabel").data(function(d){return pie(d.values)});labels.enter().append("text").attr("class","donutLabel").attr("font-size","0.7em").attr("dy",".35em").attr("fill","currentColor").merge(labels).transition().duration(transition.duration).text(function(d){return d.data.key}).attrTween("transform",function(d){this._current=this._current||d;var interpolate=d3__namespace.interpolate(this._current,d);this._current=interpolate(0);return function(t){var d2=interpolate(t);var pos=outerArc.centroid(d2);pos[0]=radius*(midAngle(d2)<Math.PI?1.2:-1.2);return"translate(".concat(pos,")")}}).styleTween("text-anchor",function(d){this._current=this._current||d;var interpolate=d3__namespace.interpolate(this._current,d);this._current=interpolate(0);return function(t){var d2=interpolate(t);return midAngle(d2)<Math.PI?"start":"end"}});labels.exit().remove();var connectorsGroupSelect=componentGroup.selectAll("g.connectors").data(function(d){return[d]});var connectorsGroup=connectorsGroupSelect.enter().append("g").attr("class","connectors").merge(connectorsGroupSelect);var connectors=connectorsGroup.selectAll("polyline.connector").data(function(d){return pie(d.values)});connectors.enter().append("polyline").attr("class","connector").attr("fill","none").attr("stroke","currentColor").attr("stroke-width","1px").merge(connectors).transition().duration(transition.duration).attrTween("points",function(d){this._current=this._current||d;var interpolate=d3__namespace.interpolate(this._current,d);this._current=interpolate(0);return function(t){var d2=interpolate(t);var pos=outerArc.centroid(d2);pos[0]=radius*.95*(midAngle(d2)<Math.PI?1.2:-1.2);return[arc.centroid(d2),outerArc.centroid(d2),pos]}});connectors.exit().remove()})}my.xScale=function(_v){if(!arguments.length)return xScale;xScale=_v;return my};my.yScale=function(_v){if(!arguments.length)return yScale;yScale=_v;return my};my.transition=function(_v){if(!arguments.length)return transition;transition=_v;return this};return my}function componentHeatMapRing(){var classed="heatMapRing";var colorScale;var xScale;var yScale;var transition={ease:d3__namespace.easeLinear,duration:0};var dispatch=d3__namespace.dispatch("customValueMouseOver","customValueMouseOut","customValueClick","customSeriesMouseOver","customSeriesMouseOut","customSeriesClick");var opacity=1;var cornerRadius=2;function my(selection){selection.each(function(data){var innerRadius=yScale(data.key);var radius=yScale(data.key)+yScale.bandwidth();var _xScale$range=xScale.range(),_xScale$range2=_slicedToArray(_xScale$range,2),startAngle=_xScale$range2[0],endAngle=_xScale$range2[1];var pie=d3__namespace.pie().value(1).sort(null).startAngle(startAngle*(Math.PI/180)).endAngle(endAngle*(Math.PI/180)).padAngle(.015);var arc=d3__namespace.arc().outerRadius(radius).innerRadius(innerRadius).cornerRadius(cornerRadius);var seriesGroup=d3__namespace.select(this).on("mouseover",function(e,d){dispatch.call("customSeriesMouseOver",this,e,d)}).on("click",function(e,d){dispatch.call("customSeriesClick",this,e,d)});var componentGroup=seriesGroup.selectAll("g.".concat(classed)).data(function(d){return[d]}).enter().append("g").classed(classed,true).merge(seriesGroup);var segments=componentGroup.selectAll(".segment").data(function(d){var key=d.key;var data=pie(d.values);data.forEach(function(d,i){data[i].key=key});return data});segments.enter().append("path").classed("segment",true).attr("d",arc).attr("stroke-width","1px").on("mouseover",function(e,d){dispatch.call("customValueMouseOver",this,e,d.data)}).on("click",function(e,d){dispatch.call("customValueClick",this,e,d.data)}).merge(segments).transition().duration(transition.duration).attr("data-name",function(d){return d.key}).attr("fill",function(d){return colorScale(d.data.value)}).attr("fill-opacity",opacity).attr("stroke",function(d){return colorScale(d.data.value)}).attr("d",arc);segments.exit().transition().ease(transition.ease).duration(transition.duration).style("opacity",0).remove()})}my.xScale=function(_v){if(!arguments.length)return xScale;xScale=_v;return my};my.yScale=function(_v){if(!arguments.length)return yScale;yScale=_v;return my};my.colorScale=function(_v){if(!arguments.length)return colorScale;colorScale=_v;return my};my.opacity=function(_v){if(!arguments.length)return opacity;opacity=_v;return this};my.transition=function(_v){if(!arguments.length)return transition;transition=_v;return this};my.dispatch=function(_v){if(!arguments.length)return dispatch();dispatch=_v;return this};my.on=function(){var value=dispatch.on.apply(dispatch,arguments);return value===dispatch?my:value};return my}function componentHeatMapRow(){var classed="heatMapRow";var xScale;var yScale;var colorScale;var transition={ease:d3__namespace.easeLinear,duration:0};var dispatch=d3__namespace.dispatch("customValueMouseOver","customValueMouseOut","customValueClick","customSeriesMouseOver","customSeriesMouseOut","customSeriesClick");var opacity=1;var cornerRadius=2;function my(selection){selection.each(function(){var cellHeight=yScale.bandwidth();var cellWidth=xScale.bandwidth();var seriesGroup=d3__namespace.select(this).on("mouseover",function(e,d){dispatch.call("customSeriesMouseOver",this,e,d)}).on("click",function(e,d){dispatch.call("customSeriesClick",this,e,d)});var componentGroup=seriesGroup.selectAll("g.".concat(classed)).data(function(d){return[d]}).enter().append("g").classed(classed,true).merge(seriesGroup);var cells=componentGroup.selectAll(".cell").data(function(d){var seriesName=d.key;var seriesValues=d.values;return seriesValues.map(function(el){var o=Object.assign({},el);o.series=seriesName;return o})});cells.enter().append("rect").attr("class","cell").attr("stroke-width","1px").attr("rx",cornerRadius).attr("ry",cornerRadius).on("mouseover",function(e,d){dispatch.call("customValueMouseOver",this,e,d)}).on("click",function(e,d){dispatch.call("customValueClick",this,e,d)}).attr("x",function(d){return xScale(d.key)}).attr("y",0).attr("width",cellWidth).attr("height",cellHeight).merge(cells).transition().ease(transition.ease).duration(transition.duration).attr("data-name",function(d){return d.key}).attr("x",function(d){return xScale(d.key)}).attr("width",cellWidth).attr("height",cellHeight).attr("fill",function(d){return colorScale(d.value)}).attr("fill-opacity",opacity).attr("stroke",function(d){return colorScale(d.value)});cells.exit().transition().ease(transition.ease).duration(transition.duration).style("opacity",0).remove()})}my.xScale=function(_v){if(!arguments.length)return xScale;xScale=_v;return my};my.yScale=function(_v){if(!arguments.length)return yScale;yScale=_v;return my};my.colorScale=function(_v){if(!arguments.length)return colorScale;colorScale=_v;return my};my.opacity=function(_v){if(!arguments.length)return opacity;opacity=_v;return this};my.transition=function(_v){if(!arguments.length)return transition;transition=_v;return this};my.dispatch=function(_v){if(!arguments.length)return dispatch();dispatch=_v;return this};my.on=function(){var value=dispatch.on.apply(dispatch,arguments);return value===dispatch?my:value};return my}function componentHtmlList(){var classed="htmlList";var dispatch=d3__namespace.dispatch("customValueMouseOver","customValueMouseOut","customValueClick","customSeriesMouseOver","customSeriesMouseOut","customSeriesClick");function my(selection){selection.each(function(){var list=d3__namespace.select(this).selectAll("ul").data(function(d){return[d]});var listEnter=list.enter().append("ul").classed(classed,true).merge(list);var seriesGroup=listEnter.selectAll("li").data(function(d){return d});seriesGroup.exit().remove();seriesGroup.enter().append("li").text(function(d){return d.key}).on("click",expand).merge(seriesGroup).transition().text(function(d){return d.key});function expand(e,d){e.stopPropagation();dispatch.call("customValueMouseOver",this,e,d);if(typeof d.values==="undefined"){return 0}var ul=d3__namespace.select(this).on("click",collapse).append("ul");var li=ul.selectAll("li").data(d.values);li.exit().remove();li.enter().append("li").text(function(d){if(typeof d.value!=="undefined"){return d.key+" : "+d.value}else{return d.key}}).on("click",expand)}function collapse(e,d){e.stopPropagation();d3__namespace.select(this).on("click",expand).selectAll("*").remove()}})}my.classed=function(_v){if(!arguments.length)return classed;classed=_v;return this};my.on=function(){var value=dispatch.on.apply(dispatch,arguments);return value===dispatch?my:value};return my}function dataTransform(data){var SINGLE_SERIES=1;var MULTI_SERIES=2;var coordinateKeys=["x","y","z"];var dataType=data.key!==undefined?SINGLE_SERIES:MULTI_SERIES;var rowKey=function(){if(dataType===SINGLE_SERIES){return Object.values(data)[0]}}();var rowTotal=function(){if(dataType===SINGLE_SERIES){return d3__namespace.sum(data.values,function(d){return d.value})}}();var rowKeys=function(){if(dataType===MULTI_SERIES){return data.map(function(d){return d.key})}}();var rowTotals=function(){if(dataType===MULTI_SERIES){var ret={};data.forEach(function(item){var rowKey=item.key;item.values.forEach(function(value){ret[rowKey]=ret[rowKey]||0;ret[rowKey]+=value.value})});return ret}}();var rowTotalsMin=function(){if(dataType===MULTI_SERIES){return d3__namespace.min(Object.values(rowTotals))}}();var rowTotalsMax=function(){if(dataType===MULTI_SERIES){return d3__namespace.max(Object.values(rowTotals))}}();var rowValuesKeys=function(){if(dataType===SINGLE_SERIES){return Object.keys(data.values[0])}else{return Object.keys(data[0].values[0])}}();var columnKeys=function(){if(dataType===SINGLE_SERIES){return data.values.map(function(d){return d.key})}var ret=[];data.forEach(function(item){var tmp=[];item.values.forEach(function(value){tmp.push(value.key)});ret=Array.from(new Set([].concat(tmp,_toConsumableArray(ret))))});return ret}();var columnTotals=function(){if(dataType!==MULTI_SERIES){return}var ret={};data.forEach(function(item){item.values.forEach(function(value){var columnName=value.key;ret[columnName]=ret[columnName]||0;ret[columnName]+=value.value})});return ret}();var columnTotalsMin=function(){if(dataType===MULTI_SERIES){return d3__namespace.min(Object.values(columnTotals))}}();var columnTotalsMax=function(){if(dataType===MULTI_SERIES){return d3__namespace.max(Object.values(columnTotals))}}();var valueMin=function(){if(dataType===SINGLE_SERIES){return d3__namespace.min(data.values,function(d){return+d.value})}var ret;data.forEach(function(item){item.values.forEach(function(value){ret=typeof ret==="undefined"?value.value:Math.min(ret,+value.value)})});return+ret}();var valueMax=function(){var ret;if(dataType===SINGLE_SERIES){ret=Math.max.apply(Math,_toConsumableArray(data.values.map(function(d){return+d.value})))}else{data.forEach(function(item){item.values.forEach(function(value){ret=typeof ret!=="undefined"?Math.max(ret,+value.value):+value.value})})}return ret}();var valueExtent=function(){return[valueMin,valueMax]}();var valueExtentStacked=function(){var lowestNegativeSum=Infinity;var highestPositiveSum=-Infinity;if(dataType===MULTI_SERIES){data.forEach(function(row){var _row$values$reduce=row.values.reduce(function(acc,column){var value=column.value;if(value<0){acc[0]+=value}else if(value>0){acc[1]+=value}return acc},[0,0]),_row$values$reduce2=_slicedToArray(_row$values$reduce,2),negativeSum=_row$values$reduce2[0],positiveSum=_row$values$reduce2[1];lowestNegativeSum=Math.min(lowestNegativeSum,negativeSum);highestPositiveSum=Math.max(highestPositiveSum,positiveSum)})}var finalLowestNegativeSum=lowestNegativeSum===Infinity?0:lowestNegativeSum;var finalHighestPositiveSum=highestPositiveSum===-Infinity?0:highestPositiveSum;return[finalLowestNegativeSum,finalHighestPositiveSum]}();var coordinatesMin=function(){var ret={};if(dataType===SINGLE_SERIES){coordinateKeys.forEach(function(key){ret[key]=Math.min.apply(Math,_toConsumableArray(data.values.map(function(d){return+d[key]})))});return ret}else{data.forEach(function(item){item.values.forEach(function(value){coordinateKeys.forEach(function(key){ret[key]=key in ret?Math.min(ret[key],+value[key]):+value[key]})})})}return ret}();var coordinatesMax=function(){var ret={};if(dataType===SINGLE_SERIES){coordinateKeys.forEach(function(key){ret[key]=Math.max.apply(Math,_toConsumableArray(data.values.map(function(d){return+d[key]})))});return ret}else{data.forEach(function(item){item.values.forEach(function(value){coordinateKeys.forEach(function(key){ret[key]=key in ret?Math.max(ret[key],+value[key]):+value[key]})})})}return ret}();var coordinatesExtent=function(){var ret={};coordinateKeys.forEach(function(key){ret[key]=[coordinatesMin[key],coordinatesMax[key]]});return ret}();var decimalPlaces=function decimalPlaces(num){var match=(""+num).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);if(!match){return 0}return Math.max(0,(match[1]?match[1].length:0)-(match[2]?+match[2]:0))};var maxDecimalPlace=function(){var ret=0;if(dataType===MULTI_SERIES){data.forEach(function(item){item.values.forEach(function(value){ret=Math.max(ret,decimalPlaces(value.value))})})}return ret>20?20:ret}();var thresholds=function(){var distance=valueMax-valueMin;var bands=[.25,.5,.75,1];return bands.map(function(v){return Number((valueMin+v*distance).toFixed(maxDecimalPlace))})}();var summary=function summary(){return{dataType:dataType,rowKey:rowKey,rowTotal:rowTotal,rowKeys:rowKeys,rowTotals:rowTotals,rowTotalsMin:rowTotalsMin,rowTotalsMax:rowTotalsMax,rowValuesKeys:rowValuesKeys,columnKeys:columnKeys,columnTotals:columnTotals,columnTotalsMin:columnTotalsMin,columnTotalsMax:columnTotalsMax,valueMin:valueMin,valueMax:valueMax,valueExtent:valueExtent,valueExtentStacked:valueExtentStacked,coordinatesMin:coordinatesMin,coordinatesMax:coordinatesMax,coordinatesExtent:coordinatesExtent,maxDecimalPlace:maxDecimalPlace,thresholds:thresholds}};var rotate=function rotate(){var columnKeys=data.map(function(d){return d.key});var rowKeys=data[0].values.map(function(d){return d.key});var rotated=rowKeys.map(function(rowKey,rowIndex){var values=columnKeys.map(function(columnKey,columnIndex){var values=Object.assign({},data[columnIndex].values[rowIndex]);values.key=columnKey;return values});return{key:rowKey,values:values}});return rotated};return{summary:summary,rotate:rotate}}function componentHtmlTable(){var classed="htmlTable";var width=800;var dispatch=d3__namespace.dispatch("customValueMouseOver","customValueMouseOut","customValueClick","customSeriesMouseOver","customSeriesMouseOut","customSeriesClick");function my(selection){selection.each(function(data){var _dataTransform$summar=dataTransform(data).summary(),columnKeys=_dataTransform$summar.columnKeys;var table=d3__namespace.select(this).selectAll("table").data(function(d){return[d]});var tableEnter=table.enter().append("table").classed("d3ez",true).classed(classed,true).attr("width",width).merge(table);tableEnter.append("thead");tableEnter.append("tfoot");tableEnter.append("tbody");var head=tableEnter.select("thead").selectAll("tr").data([columnKeys]);head.exit().remove();var headEnter=head.enter().append("tr").merge(head);var th=headEnter.selectAll("th").data(function(d){d.unshift("");return d});th.exit().remove();th.enter().append("th").merge(th).html(function(d){return d});var body=tableEnter.select("tbody").selectAll("tr").data(data);body.exit().remove();var bodyEnter=body.enter().append("tr").attr("class",function(d){return d.key}).on("mouseover",function(e,d){dispatch.call("customSeriesMouseOver",this,e,d)}).on("click",function(e,d){dispatch.call("customSeriesClick",this,e,d)}).merge(body);var td=bodyEnter.selectAll("td").data(function(d){d.values.unshift({key:d.key,value:d.key});return d.values});td.exit().remove();td.enter().append("td").on("mouseover",function(e,d){dispatch.call("customValueMouseOver",this,e,d)}).on("click",function(e,d){dispatch.call("customValueClick",this,e,d)}).merge(td).html(function(d){return d.value})})}my.classed=function(_v){if(!arguments.length)return classed;classed=_v;return this};my.width=function(_v){if(!arguments.length)return width;width=_v;return this};my.on=function(){var value=dispatch.on.apply(dispatch,arguments);return value===dispatch?my:value};return my}function componentLegendSize(){var width=100;var height=150;var sizeScale;var itemCount=4;var opacity=1;var transition={ease:d3__namespace.easeLinear,duration:0};function my(selection){height=height?height:this.attr("height");width=width?width:this.attr("width");var data=function(){var domainMin=parseFloat(d3__namespace.min(sizeScale.domain()));var domainMax=parseFloat(d3__namespace.max(sizeScale.domain()));var increment=(domainMax-domainMin)/itemCount;var ranges=Array(itemCount).fill().map(function(v,i){var rangeStart=domainMin+increment*i;var rangeEnd=domainMin+increment*(i+1);return[rangeStart,rangeEnd]});var yStep=height/(itemCount*2);var yDomain=[0,itemCount-1];var yRange=[yStep,height-yStep];var yScale=d3__namespace.scaleLinear().domain(yDomain).range(yRange);return ranges.map(function(v,i){return{x:sizeScale(domainMax),y:yScale(i),r:sizeScale(ranges[i][1]),text:v[0].toFixed(0)+"  "+v[1].toFixed(0)}})}();var legendContainer=selection.selectAll(".legendContainer").data([data]);var legendContainerEnter=legendContainer.enter().append("g").classed("legendContainer",true).attr("width",width).attr("height",height).merge(legendContainer);var items=legendContainerEnter.selectAll(".legendItem").data(function(d){return d});var itemsEnter=items.enter().append("g").classed("legendItem",true).attr("transform",function(d){return"translate(0,".concat(d.y,")")});items.exit().remove();itemsEnter.append("circle").attr("r",function(d){return d.r}).attr("cx",function(d){return d.x}).attr("fill","#cad4e7").attr("stroke","#cad4e7").attr("stroke-width",1).attr("fill-opacity",opacity/2);itemsEnter.append("text").attr("font-size","0.9em").attr("fill","currentColor").attr("dominant-baseline","middle").attr("x",function(d){return d.x*2+5}).text(function(d){return d.text});var itemsTrans=items.transition().ease(transition.ease).duration(transition.duration).attr("transform",function(d){return"translate(0,".concat(d.y,")")});itemsTrans.select("text").text(function(d){return d.text});itemsTrans.select("circle").attr("fill-opacity",opacity/2)}my.width=function(_v){if(!arguments.length)return width;width=_v;return my};my.height=function(_v){if(!arguments.length)return height;height=_v;return my};my.sizeScale=function(_v){if(!arguments.length)return sizeScale;sizeScale=_v;return my};my.itemCount=function(_v){if(!arguments.length)return itemCount;itemCount=_v;return my};my.opacity=function(_v){if(!arguments.length)return opacity;opacity=_v;return this};my.transition=function(_v){if(!arguments.length)return transition;transition=_v;return this};return my}function generateLayout(cellCount,width,height){var cols=Math.ceil(Math.sqrt(cellCount));var rows=Math.ceil(cellCount/cols);var cellWidth=width/cols;var cellHeight=height/rows;var cellPadding=15;var cellRadius=Math.min(cellWidth,cellHeight)/2-cellPadding;var coordinates=[];for(var i=0;i<cellCount;i++){var row=Math.floor(i/cols);var col=i%cols;var offsetX=cellWidth/2+(width-Math.min(cellCount-row*cols,cols)*cellWidth)/2;var offsetY=cellHeight/2;var x=col*cellWidth+offsetX;var y=row*cellHeight+offsetY;coordinates.push({x:x,y:y})}return{cellWidth:cellWidth,cellHeight:cellHeight,cellRadius:cellRadius,coordinates:coordinates}}function wrap(selection,width){selection.each(function(){var text=d3__namespace.select(this);var content=text.text();var x=text.attr("x");var y=text.attr("y");var words=content.split(/\s+/).reverse();var line=[];var lineNumber=1;var lineHeight=1.1;var dy=parseFloat(text.attr("dy"))||0;var tspan=text.text(null).append("tspan").attr("x",x).attr("y",y).attr("dy","".concat(dy,"em"));var word;while(word=words.pop()){line.push(word);tspan.text(line.join(" "));if(tspan.node().getComputedTextLength()>width&&line.length>1){line.pop();tspan.text(line.join(" "));line=[word];tspan=text.append("tspan").attr("x",x).attr("y",y).attr("dy","".concat(lineNumber*lineHeight+dy,"em")).text(word);lineNumber++}}})}function componentLegendCategorical(){var width=100;var height=150;var colorScale;var itemCount;var itemType="rect";var opacity=1;var transition={ease:d3__namespace.easeLinear,duration:0};var cornerRadius=2;function my(selection){height=height?height:this.attr("height");width=width?width:this.attr("width");var data=function(){var domain=colorScale.domain();itemCount=domain.length;var itemHeight=height/itemCount/2;var itemWidth=20;return domain.map(function(v,i){return{y:10+itemHeight*2*i,width:itemWidth,height:itemHeight,color:colorScale(v),text:v}})}();var legendContainer=selection.selectAll(".legendContainer").data([data]);var legendContainerEnter=legendContainer.enter().append("g").classed("legendContainer",true).attr("width",width).attr("height",height).merge(legendContainer);var items=legendContainerEnter.selectAll(".legendItem").data(function(d){return d});var itemsEnter=items.enter().append("g").classed("legendItem",true).attr("transform",function(d){return"translate(0,".concat(d.y,")")});items.exit().remove();switch(itemType){case"line":itemsEnter.append("line").attr("x1",0).attr("y1",function(d){return d.height/2}).attr("x2",function(d){return d.width}).attr("y2",function(d){return d.height/2}).attr("stroke",function(d){return d.color}).attr("stroke-width",2);items.select("line").attr("x1",0).attr("y1",function(d){return d.height/2}).attr("x2",function(d){return d.width}).attr("y2",function(d){return d.height/2}).attr("stroke",function(d){return d.color}).attr("stroke-width",2);break;case"rect":default:itemsEnter.append("rect").attr("rx",cornerRadius).attr("ry",cornerRadius).attr("width",function(d){return d.width}).attr("height",function(d){return d.height}).style("fill",function(d){return d.color}).attr("fill-opacity",opacity).attr("stroke",function(d){return d.color}).attr("stroke-width",1);items.select("rect").attr("width",function(d){return d.width}).attr("height",function(d){return d.height}).style("fill",function(d){return d.color}).attr("fill-opacity",opacity).attr("stroke",function(d){return d.color}).attr("stroke-width",1);break}itemsEnter.append("text").text(function(d){return d.text}).attr("font-size","0.9em").attr("dominant-baseline","middle").attr("fill","currentColor").attr("x",40).attr("y",function(d){return d.height/2}).attr("dy",0).call(wrap,width-40).merge(items);items.attr("transform",function(d){return"translate(0,".concat(d.y,")")}).select("text").text(function(d){return d.text}).attr("y",function(d){return d.height/2}).call(wrap,width-40)}my.width=function(_v){if(!arguments.length)return width;width=_v;return my};my.height=function(_v){if(!arguments.length)return height;height=_v;return my};my.colorScale=function(_v){if(!arguments.length)return colorScale;colorScale=_v;return my};my.itemType=function(_v){if(!arguments.length)return itemType;itemType=_v;return my};my.opacity=function(_v){if(!arguments.length)return opacity;opacity=_v;return this};my.transition=function(_v){if(!arguments.length)return transition;transition=_v;return this};return my}function componentLegendThreshold(){var width=100;var height=150;var thresholdScale;var opacity=1;var transition={ease:d3__namespace.easeLinear,duration:0};function my(selection){height=height?height:this.attr("height");width=width?width:this.attr("width");var domainMin=d3__namespace.min(thresholdScale.domain());var domainMax=d3__namespace.max(thresholdScale.domain());var domainMargin=(domainMax-domainMin)*.1;var x=d3__namespace.scaleLinear().domain([domainMin-domainMargin,domainMax+domainMargin]).range([0,height]);var legendContainer=selection.selectAll(".legendContainer").data([0]);var legendContainerEnter=legendContainer.enter().append("g").classed("legendContainer",true).attr("width",width).attr("height",height).merge(legendContainer);var axis=d3__namespace.axisRight(x).tickSize(30).tickValues(thresholdScale.domain());legendContainerEnter.transition().ease(transition.ease).duration(transition.duration).call(axis).selectAll(".domain").attr("opacity",0);var colors=legendContainerEnter.selectAll("rect").data(thresholdScale.range().map(function(color){var d=thresholdScale.invertExtent(color);if(typeof d[0]==="undefined")d[0]=x.domain()[0];if(typeof d[1]==="undefined")d[1]=x.domain()[1];return d}));colors.enter().append("rect").merge(colors).transition().ease(transition.ease).duration(transition.duration).attr("width",20).attr("y",function(d){return x(d[0])}).attr("height",function(d){return x(d[1])-x(d[0])}).style("fill",function(d){return thresholdScale(d[0])}).attr("fill-opacity",opacity).attr("stroke",function(d){return thresholdScale(d[0])}).attr("stroke-width",1)}my.width=function(_v){if(!arguments.length)return width;width=_v;return my};my.height=function(_v){if(!arguments.length)return height;height=_v;return my};my.thresholdScale=function(_v){if(!arguments.length)return thresholdScale;thresholdScale=_v;return my};my.transition=function(_v){if(!arguments.length)return transition;transition=_v;return this};my.opacity=function(_v){if(!arguments.length)return opacity;opacity=_v;return this};my.transition=function(_v){if(!arguments.length)return transition;transition=_v;return this};return my}function componentLegend(){var width=100;var height=150;var margin={top:35,right:10,bottom:10,left:10};var sizeScale;var colorScale;var title="Key";var legend;var opacity=1;var transition={ease:d3__namespace.easeLinear,duration:0};var itemType="rect";function my(selection){height=height?height:this.attr("height");width=width?width:this.attr("width");if(typeof sizeScale!=="undefined"){legend=componentLegendSize().sizeScale(sizeScale).itemCount(4)}if(typeof colorScale!=="undefined"){if(scaleType(colorScale)==="threshold"){legend=componentLegendThreshold().thresholdScale(colorScale)}else{legend=componentLegendCategorical().colorScale(colorScale).itemType(itemType)}}legend.opacity(opacity).transition(transition);var legendBox=selection.selectAll(".legendBox").data([0]);var legendBoxEnter=legendBox.enter().append("g").attr("class","legendBox");legendBoxEnter.append("rect").classed("legendBorder",true).attr("width",width).attr("height",height).attr("fill-opacity",0).attr("stroke-width",1).attr("stroke","currentcolor");legendBox.transition().ease(transition.ease).duration(transition.duration).selectAll(".legendBorder").attr("width",width).attr("height",height);legendBoxEnter.append("g").classed("legendTitle",true).attr("transform","translate(10,10)").append("text").style("font-weight","bold").attr("font-size","0.9em").attr("dominant-baseline","hanging").attr("fill","currentColor").text(title);legend.width(width-(margin.left+margin.right)).height(height-(margin.top+margin.bottom));legendBoxEnter.append("g").classed("legendBox",true).attr("transform","translate(".concat(margin.left,",").concat(margin.top,")")).call(legend);legendBox.selectAll(".legendBox").call(legend)}function scaleType(scale){var s=scale.copy();if(s.domain([1,2]).range([1,2])(1.5)===1){return"ordinal"}else if(typeof s.invert!=="function"){return"threshold"}else if(s.domain([1,2]).range([1,2]).invert(1.5)===1.5){return"linear"}else if(s.domain([1,2]).range([1,2]).invert(1.5)instanceof Date){return"time"}else{return"not supported"}}my.width=function(_v){if(!arguments.length)return width;width=_v;return my};my.height=function(_v){if(!arguments.length)return height;height=_v;return my};my.sizeScale=function(_v){if(!arguments.length)return sizeScale;sizeScale=_v;return my};my.colorScale=function(_v){if(!arguments.length)return colorScale;colorScale=_v;return my};my.title=function(_v){if(!arguments.length)return title;title=_v;return my};my.itemType=function(_v){if(!arguments.length)return itemType;itemType=_v;return this};my.opacity=function(_v){if(!arguments.length)return opacity;opacity=_v;return this};my.transition=function(_v){if(!arguments.length)return transition;transition=_v;return this};return my}function componentLineChart(){var classed="lineChart";var xScale;var yScale;var colorScale;var opacity=1;var transition={ease:d3__namespace.easeLinear,duration:0};var dispatch=d3__namespace.dispatch("customValueMouseOver","customValueMouseOut","customValueClick","customSeriesMouseOver","customSeriesMouseOut","customSeriesClick");function my(selection){selection.each(function(){var line=d3__namespace.line().curve(d3__namespace.curveCardinal).x(function(d){return xScale(d.key)}).y(function(d){return yScale(d.value)});var pathTween=function pathTween(d){var i=d3__namespace.interpolate(1,d.length+1);return function(t){return line(d.slice(0,i(t)))}};var seriesGroup=d3__namespace.select(this).on("mouseover",function(e,d){dispatch.call("customSeriesMouseOver",this,e,d)}).on("click",function(e,d){dispatch.call("customSeriesClick",this,e,d)});var componentGroup=seriesGroup.selectAll("g.".concat(classed)).data(function(d){return[d]}).enter().append("g").classed(classed,true).merge(seriesGroup);var path=componentGroup.selectAll(".line").data(function(d){return[d]});path.enter().append("path").attr("class","line").attr("stroke-width",1.5).attr("fill","none").attr("d",function(d){return line(d.values)}).merge(path).transition().duration(transition.duration).attr("data-name",function(d){return d.key}).attrTween("d",function(d){return pathTween(d.values)}).attr("stroke",function(d){return colorScale(d.key)}).attr("opacity",opacity);path.exit().transition().style("opacity",0).remove()})}my.xScale=function(_v){if(!arguments.length)return xScale;xScale=_v;return my};my.yScale=function(_v){if(!arguments.length)return yScale;yScale=_v;return my};my.colorScale=function(_v){if(!arguments.length)return colorScale;colorScale=_v;return my};my.opacity=function(_v){if(!arguments.length)return opacity;opacity=_v;return this};my.transition=function(_v){if(!arguments.length)return transition;transition=_v;return this};my.dispatch=function(_v){if(!arguments.length)return dispatch();dispatch=_v;return this};my.on=function(){var value=dispatch.on.apply(dispatch,arguments);return value===dispatch?my:value};return my}function componentNumberCard(){var classed="numberCard";var xScale;var yScale;var colorScale;var transition={ease:d3__namespace.easeLinear,duration:0};var dispatch=d3__namespace.dispatch("customValueMouseOver","customValueMouseOut","customValueClick","customSeriesMouseOver","customSeriesMouseOut","customSeriesClick");var opacity=1;function my(selection){selection.each(function(){var cellHeight=yScale.bandwidth();var cellWidth=xScale.bandwidth();var seriesGroup=d3__namespace.select(this).on("mouseover",function(e,d){dispatch.call("customSeriesMouseOver",this,e,d)}).on("click",function(e,d){dispatch.call("customSeriesClick",this,e,d)});var componentGroup=seriesGroup.selectAll("g.".concat(classed)).data(function(d){return[d]}).enter().append("g").classed(classed,true).merge(seriesGroup);var numbers=componentGroup.selectAll(".number").data(function(d){return d.values});numbers.enter().append("text").attr("class","number").attr("text-anchor","middle").attr("dominant-baseline","central").on("mouseover",function(e,d){dispatch.call("customValueMouseOver",this,e,d)}).on("click",function(e,d){dispatch.call("customValueClick",this,e,d)}).merge(numbers).transition().ease(transition.ease).duration(transition.duration).attr("data-name",function(d){return d.key}).text(function(d){return d["value"]}).attr("fill",function(d){return colorScale(d.value)}).attr("x",function(d){return xScale(d.key)+cellWidth/2}).attr("y",cellHeight/2);numbers.exit().transition().style("opacity",0).remove()})}my.xScale=function(_v){if(!arguments.length)return xScale;xScale=_v;return my};my.yScale=function(_v){if(!arguments.length)return yScale;yScale=_v;return my};my.colorScale=function(_v){if(!arguments.length)return colorScale;colorScale=_v;return my};my.opacity=function(_v){if(!arguments.length)return opacity;opacity=_v;return this};my.transition=function(_v){if(!arguments.length)return transition;transition=_v;return this};my.dispatch=function(_v){if(!arguments.length)return dispatch();dispatch=_v;return this};my.on=function(){var value=dispatch.on.apply(dispatch,arguments);return value===dispatch?my:value};return my}function componentPolarArea(){var classed="polarArea";var xScale;var yScale;var colorScale;var transition={ease:d3__namespace.easeLinear,duration:0};var dispatch=d3__namespace.dispatch("customValueMouseOver","customValueMouseOut","customValueClick","customSeriesMouseOver","customSeriesMouseOut","customSeriesClick");var opacity=1;var cornerRadius=2;function my(selection){selection.each(function(){var _xScale$range=xScale.range(),_xScale$range2=_slicedToArray(_xScale$range,2),startAngle=_xScale$range2[0],endAngle=_xScale$range2[1];var pie=d3__namespace.pie().value(1).sort(null).startAngle(startAngle*Math.PI/180).endAngle(endAngle*Math.PI/180).padAngle(0);var arc=d3__namespace.arc().outerRadius(function(d){return yScale(d.data.value)}).innerRadius(0).cornerRadius(cornerRadius);var arcTween=function arcTween(d){var i=d3__namespace.interpolate(0,d.data.value);return function(t){d.data.value=i(t);return arc(d)}};var seriesGroup=d3__namespace.select(this).on("mouseover",function(e,d){dispatch.call("customSeriesMouseOver",this,e,d)}).on("click",function(e,d){dispatch.call("customSeriesClick",this,e,d)});var componentGroup=seriesGroup.selectAll("g.".concat(classed)).data(function(d){return[d]}).enter().append("g").classed(classed,true).merge(seriesGroup);var segments=componentGroup.selectAll(".segment").data(function(d){return pie(d.values)});segments.enter().append("path").classed("segment",true).on("mouseover",function(e,d){dispatch.call("customValueMouseOver",this,e,d.data)}).on("click",function(e,d){dispatch.call("customValueClick",this,e,d.data)}).merge(segments).transition().ease(transition.ease).duration(transition.duration).attr("data-name",function(d){return d.data.key}).attr("d",arc).attrTween("d",arcTween).style("fill",function(d){return colorScale(d.data.key)}).attr("fill-opacity",opacity).attr("stroke",function(d){return colorScale(d.data.key)}).attr("stroke-width","1px");segments.exit().transition().style("opacity",0).remove()})}my.xScale=function(_v){if(!arguments.length)return xScale;xScale=_v;return my};my.yScale=function(_v){if(!arguments.length)return yScale;yScale=_v;return my};my.colorScale=function(_v){if(!arguments.length)return colorScale;colorScale=_v;return my};my.opacity=function(_v){if(!arguments.length)return opacity;opacity=_v;return this};my.transition=function(_v){if(!arguments.length)return transition;transition=_v;return this};my.dispatch=function(_v){if(!arguments.length)return dispatch();dispatch=_v;return this};my.on=function(){var value=dispatch.on.apply(dispatch,arguments);return value===dispatch?my:value};return my}function componentProportionalAreaCircles(){var classed="proportionalAreaCircles";var xScale;var yScale;var colorScale;var sizeScale;var transition={ease:d3__namespace.easeLinear,duration:0};var dispatch=d3__namespace.dispatch("customValueMouseOver","customValueMouseOut","customValueClick","customSeriesMouseOver","customSeriesMouseOut","customSeriesClick");var opacity=1;function my(selection){selection.each(function(){var cellHeight=yScale.bandwidth();var cellWidth=xScale.bandwidth();var seriesGroup=d3__namespace.select(this).on("mouseover",function(e,d){dispatch.call("customSeriesMouseOver",this,e,d)}).on("click",function(e,d){dispatch.call("customSeriesClick",this,e,d)});var componentGroup=seriesGroup.selectAll("g.".concat(classed)).data(function(d){return[d]}).enter().append("g").classed(classed,true).merge(seriesGroup);var spot=componentLabeledNode().radius(function(d){return sizeScale(d.value)}).color(function(d){return colorScale(d.value)}).label(function(d){return d.value}).display("none").opacity(opacity).stroke(1,"currentColor").dispatch(dispatch).transition(transition);var spots=componentGroup.selectAll(".punchSpot").data(function(d){return d.values});spots.enter().append("g").classed("punchSpot",true).on("mouseover",function(e,d){d3__namespace.select(this).select("text").style("display","block");dispatch.call("customValueMouseOver",this,e,d)}).on("mouseout",function(){d3__namespace.select(this).select("text").style("display","none")}).on("click",function(e,d){dispatch.call("customValueClick",this,e,d)}).attr("transform",function(d){var x=cellWidth/2+xScale(d.key);var y=cellHeight/2;return"translate(".concat(x,",").concat(y,")")}).merge(spots).transition().ease(transition.ease).duration(transition.duration).attr("data-name",function(d){return d.key}).attr("transform",function(d){var x=cellWidth/2+xScale(d.key);var y=cellHeight/2;return"translate(".concat(x,",").concat(y,")")}).call(spot);spots.exit().transition().ease(transition.ease).duration(transition.duration).style("opacity",0).remove()})}my.xScale=function(_v){if(!arguments.length)return xScale;xScale=_v;return my};my.yScale=function(_v){if(!arguments.length)return yScale;yScale=_v;return my};my.colorScale=function(_v){if(!arguments.length)return colorScale;colorScale=_v;return my};my.sizeScale=function(_v){if(!arguments.length)return sizeScale;sizeScale=_v;return my};my.opacity=function(_v){if(!arguments.length)return opacity;opacity=_v;return this};my.transition=function(_v){if(!arguments.length)return transition;transition=_v;return this};my.dispatch=function(_v){if(!arguments.length)return dispatch();dispatch=_v;return this};my.on=function(){var value=dispatch.on.apply(dispatch,arguments);return value===dispatch?my:value};return my}function componentRadarArea(){var classed="radarArea";var xScale;var yScale;var colorScale;var transition={ease:d3__namespace.easeLinear,duration:0};var dispatch=d3__namespace.dispatch("customValueMouseOver","customValueMouseOut","customValueClick","customSeriesMouseOver","customSeriesMouseOut","customSeriesClick");var opacity=1;function my(selection){selection.each(function(data){var angleSlice=Math.PI*2/data.values.length;var radarLine=d3__namespace.lineRadial().radius(function(d){return yScale(d.value)}).angle(function(d,i){return i*angleSlice}).curve(d3__namespace.curveBasis).curve(d3__namespace.curveCardinalClosed);var seriesGroup=d3__namespace.select(this).on("mouseover",function(e,d){dispatch.call("customSeriesMouseOver",this,e,d)}).on("click",function(e,d){dispatch.call("customSeriesClick",this,e,d)});var componentGroup=seriesGroup.attr("fill",function(d){return colorScale(d.key)}).style("stroke",function(d){return colorScale(d.key)}).selectAll("g.".concat(classed)).data(function(d){return[d]}).enter().append("g").classed(classed,true).merge(seriesGroup);var path=componentGroup.selectAll("path").data(function(d){return[d]});path.enter().append("path").on("mouseover",function(){d3__namespace.select(this).transition().duration(200).style("fill-opacity",opacity)}).on("mouseout",function(){d3__namespace.select(this).transition().duration(200).style("fill-opacity",opacity/2)}).merge(path).transition().ease(transition.ease).duration(transition.duration).attr("data-name",function(d){return d.key}).style("fill-opacity",opacity/2).attr("d",function(d){return radarLine(d.values)});var dots=componentGroup.selectAll("circle").data(function(d){return d.values});dots.enter().append("circle").attr("class","radarCircle").attr("r",4).style("fill-opacity",.8).merge(dots).transition().ease(transition.ease).duration(transition.duration).attr("data-name",function(d){return d.key}).attr("cx",function(d,i){return yScale(d.value)*Math.cos(angleSlice*i-Math.PI/2)}).attr("cy",function(d,i){return yScale(d.value)*Math.sin(angleSlice*i-Math.PI/2)})})}my.xScale=function(_v){if(!arguments.length)return xScale;xScale=_v;return my};my.yScale=function(_v){if(!arguments.length)return yScale;yScale=_v;return my};my.colorScale=function(_v){if(!arguments.length)return colorScale;colorScale=_v;return my};my.opacity=function(_v){if(!arguments.length)return opacity;opacity=_v;return this};my.transition=function(_v){if(!arguments.length)return transition;transition=_v;return this};my.dispatch=function(_v){if(!arguments.length)return dispatch();dispatch=_v;return this};my.on=function(){var value=dispatch.on.apply(dispatch,arguments);return value===dispatch?my:value};return my}function componentRoseChartSector(){var classed="roseChartSector";var xScale;var yScale;var colorScale;var transition={ease:d3__namespace.easeLinear,duration:0};var dispatch=d3__namespace.dispatch("customValueMouseOver","customValueMouseOut","customValueClick","customSeriesMouseOver","customSeriesMouseOut","customSeriesClick");var stacked=false;var opacity=1;var cornerRadius=2;function my(selection){selection.each(function(data){var stacker=function stacker(data){var series=[];var innerRadius=0;var outerRadius=0;data.forEach(function(d,i){outerRadius=innerRadius+d.value;series[i]={key:d.key,value:d.value,innerRadius:yScale(innerRadius),outerRadius:yScale(outerRadius)};innerRadius+=stacked?d.value:0});return series};var startAngle=xScale(data.key);var endAngle=xScale(data.key)+xScale.bandwidth();var arc=d3__namespace.arc().innerRadius(function(d){return d.innerRadius}).outerRadius(function(d){return d.outerRadius}).startAngle(startAngle*(Math.PI/180)).endAngle(endAngle*(Math.PI/180)).cornerRadius(cornerRadius);var arcTween=function arcTween(d){var i=d3__namespace.interpolate(d.innerRadius,d.outerRadius);return function(t){d.outerRadius=i(t);return arc(d)}};var seriesGroup=d3__namespace.select(this).on("mouseover",function(e,d){dispatch.call("customSeriesMouseOver",this,e,d)}).on("click",function(e,d){dispatch.call("customSeriesClick",this,e,d)});var componentGroup=seriesGroup.selectAll("g.".concat(classed)).data(function(d){return[d]}).enter().append("g").classed(classed,true).merge(seriesGroup);var arcs=componentGroup.selectAll(".arc").data(function(d){return stacker(d.values)});arcs.enter().append("path").classed("arc",true).attr("stroke-width","1px").on("mouseover",function(e,d){dispatch.call("customValueMouseOver",this,e,d)}).on("click",function(e,d){dispatch.call("customValueClick",this,e,d)}).merge(arcs).transition().ease(transition.ease).duration(transition.duration).attr("data-name",function(d){return d.key}).attr("d",arc).attrTween("d",arcTween).attr("fill",function(d){return colorScale(d.key)}).attr("stroke",function(d){return colorScale(d.key)}).attr("fill-opacity",opacity);arcs.exit().transition().style("opacity",0).remove()})}my.xScale=function(_v){if(!arguments.length)return xScale;xScale=_v;return my};my.yScale=function(_v){if(!arguments.length)return yScale;yScale=_v;return my};my.colorScale=function(_v){if(!arguments.length)return colorScale;colorScale=_v;return my};my.stacked=function(_v){if(!arguments.length)return stacked;stacked=_v;return my};my.opacity=function(_v){if(!arguments.length)return opacity;opacity=_v;return this};my.transition=function(_v){if(!arguments.length)return transition;transition=_v;return this};my.dispatch=function(_v){if(!arguments.length)return dispatch();dispatch=_v;return this};my.on=function(){var value=dispatch.on.apply(dispatch,arguments);return value===dispatch?my:value};return my}function componentScatterPlot(){var classed="scatterPlot";var xScale;var yScale;var colorScale;var opacity=1;var transition={ease:d3__namespace.easeLinear,duration:0};var dispatch=d3__namespace.dispatch("customValueMouseOver","customValueMouseOut","customValueClick","customSeriesMouseOver","customSeriesMouseOut","customSeriesClick");function my(selection){selection.each(function(){d3__namespace.max(yScale.range());var seriesGroup=d3__namespace.select(this).on("mouseover",function(e,d){dispatch.call("customSeriesMouseOver",this,e,d)}).on("click",function(e,d){dispatch.call("customSeriesClick",this,e,d)});var componentGroup=seriesGroup.selectAll("g.".concat(classed)).data(function(d){return[d]}).enter().append("g").classed(classed,true).merge(seriesGroup);var dots=componentGroup.attr("fill",function(d){return colorScale(d.key)}).selectAll(".dot").data(function(d){return d.values});dots.enter().append("circle").attr("class","dot").attr("r",3).attr("cx",0).attr("cy",function(d){return yScale(d.value)}).on("mouseover",function(e,d){dispatch.call("customValueMouseOver",this,e,d)}).on("click",function(e,d){dispatch.call("customValueClick",this,e,d)}).merge(dots).transition().ease(transition.ease).duration(transition.duration).attr("data-name",function(d){return d.key}).attr("cx",function(d){return xScale(d.key)}).attr("cy",function(d){return yScale(d.value)}).attr("opacity",opacity);dots.exit().transition().style("opacity",0).remove()})}my.xScale=function(_v){if(!arguments.length)return xScale;xScale=_v;return my};my.yScale=function(_v){if(!arguments.length)return yScale;yScale=_v;return my};my.colorScale=function(_v){if(!arguments.length)return colorScale;colorScale=_v;return my};my.opacity=function(_v){if(!arguments.length)return opacity;opacity=_v;return this};my.transition=function(_v){if(!arguments.length)return transition;transition=_v;return this};my.dispatch=function(_v){if(!arguments.length)return dispatch();dispatch=_v;return this};my.on=function(){var value=dispatch.on.apply(dispatch,arguments);return value===dispatch?my:value};return my}function componentTitle(){var mainText="Title";var subText="Sub Title";var height=40;var width=200;function my(selection){selection.selectAll("#titleGroup").data([0]).enter().append("g").attr("id","titleGroup");var titleGroup=selection.select("#titleGroup");titleGroup.selectAll(".title").data([mainText]).enter().append("text").classed("title",true).text(function(d){return d}).attr("fill","currentColor");var title=titleGroup.select(".title").text(mainText);titleGroup.selectAll(".subTitle").data([subText]).enter().append("text").classed("subTitle",true).text(function(d){return d}).attr("fill","currentColor");var subTitle=titleGroup.select(".subTitle").text(subText);title.style("text-anchor","middle").attr("transform","translate(0, 15)");subTitle.style("text-anchor","middle").attr("transform","translate(0, 30)")}my.width=function(_v){if(!arguments.length)return width;width=_v;return this};my.height=function(_v){if(!arguments.length)return height;height=_v;return this};my.mainText=function(_v){if(!arguments.length)return mainText;mainText=_v;return this};my.subText=function(_v){if(!arguments.length)return subText;subText=_v;return this};return my}var component={barsCircular:componentBarsCircular,barsHorizontal:componentBarsHorizontal,barsVertical:componentBarsVertical,barsVerticalStacked:componentBarsVerticalStacked,bubbles:componentBubbles,candleSticks:componentCandleSticks,circularAxis:componentCircularAxis,circularRingLabels:componentCircularRingLabels,circularSectorLabels:componentCircularSectorLabels,donut:componentDonut,donutLabels:componentDonutLabels,heatMapRing:componentHeatMapRing,heatMapRow:componentHeatMapRow,htmlList:componentHtmlList,htmlTable:componentHtmlTable,labeledNode:componentLabeledNode,legend:componentLegend,legendSize:componentLegendSize,legendCategorical:componentLegendCategorical,legendThreshold:componentLegendThreshold,lineChart:componentLineChart,numberCard:componentNumberCard,polarArea:componentPolarArea,proportionalAreaCircles:componentProportionalAreaCircles,radarArea:componentRadarArea,roseChartSector:componentRoseChartSector,scatterPlot:componentScatterPlot,title:componentTitle};var palette={categorical:function categorical(index){switch(index){case 1:return["#5da5da","#faa43a","#60bd68","#f17cb0","#b2912f","#b276b2","#decf3f","#f15854","#4d4d4d"];case 2:return["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd","#fddaec","#f2f2f2"];case 3:return["#3f51b5","#ff9800","#8bc34a","#9c27b0","#ffeb3b","#03a9f4","#f44336","#009688","#795548"]}},diverging:function diverging(index){switch(index){case 1:return["#8c510a","#bf812d","#dfc27d","#f6e8c3","#f5f5f5","#c7eae5","#80cdc1","#35978f","#01665e"];case 2:return["#d73027","#f46d43","#fdae61","#fee08b","#ffffbf","#d9ef8b","#a6d96a","#66bd63","#1a9850"];case 3:return["#0000ff","#8052fe","#b58bfb","#ddc5f7","#fffff0","#ffcfb4","#ff9e7a","#ff6842","#ff0000"]}},sequential:function sequential(origHex,count){var lumStep=.1;var lumMax=lumStep*count/2;var lumMin=0-lumMax;var lumScale=d3__namespace.scaleLinear().domain([1,count]).range([lumMin,lumMax]);var result=[];for(var i=1;i<=count;i++){var lum=lumScale(i);origHex=String(origHex).replace(/[^0-9a-f]/gi,"");if(origHex.length<6){origHex=origHex[0]+origHex[0]+origHex[1]+origHex[1]+origHex[2]+origHex[2]}var newHex="#";var c=void 0;for(var j=0;j<3;j++){c=parseInt(origHex.substr(j*2,2),16);c=Math.round(Math.min(Math.max(0,c+c*lum),255)).toString(16);newHex+=("00"+c).substr(c.length)}result.push(newHex)}return result},lumShift:function lumShift(colors,lum){var result=[];colors.forEach(function addNumber(origHex,index){origHex=String(origHex).replace(/[^0-9a-f]/gi,"");if(origHex.length<6){origHex=origHex[0]+origHex[0]+origHex[1]+origHex[1]+origHex[2]+origHex[2]}lum=lum||0;var newHex="#";for(var i=0;i<3;i++){var c=parseInt(origHex.substr(i*2,2),16);c=Math.round(Math.min(Math.max(0,c+c*lum),255)).toString(16);newHex+=("00"+c).substr(c.length)}result[index]=newHex});return result}};function chartBarChartCircular(){var classed="barChartCircular";var width=700;var height=400;var margin={top:40,right:40,bottom:40,left:40};var colors=palette.categorical(3);var transition={ease:d3__namespace.easeLinear,duration:100};var dispatch=d3__namespace.dispatch("customValueMouseOver","customValueMouseOut","customValueClick","customSeriesMouseOver","customSeriesMouseOut","customSeriesClick");var title=null;var subTitle=null;var legendTitle="Key";var opacity=1;var showLegend=false;var showAxis=true;var startAngle=0;var endAngle=270;function my(selection){var svg=function(selection){var el=selection._groups[0][0];if(!!el.ownerSVGElement||el.tagName==="svg"){return selection}else{var svgSelection=selection.selectAll("svg").data(function(d){return[d]});return svgSelection.enter().append("svg").merge(svgSelection)}}(selection);selection.each(function(data){var legendW=showLegend?120:0;var legendH=Math.max(height/2.5,100);var legendPad=showLegend?15:0;var titleH=title?40:0;var chartW=Math.max(width-margin.left-legendPad-legendW-margin.right,100);var chartH=Math.max(height-margin.top-titleH-margin.bottom,100);var _generateLayout=generateLayout(data.length,chartW,chartH),coordinates=_generateLayout.coordinates,radius=_generateLayout.cellRadius;var innerRadius=radius/4;var _dataTransform$summar=dataTransform(data).summary(),columnKeys=_dataTransform$summar.columnKeys,valueMax=_dataTransform$summar.valueMax;var valueExtent=[0,valueMax];var xScale=d3__namespace.scaleBand().domain(columnKeys).rangeRound([innerRadius,radius]).padding(.15);var yScale=d3__namespace.scaleLinear().domain(valueExtent).range([startAngle,endAngle]);var colorScale=d3__namespace.scaleOrdinal().domain(columnKeys).range(colors);var mainLayers=["title","chart","legend"];svg.classed("d3ez",true).attr("width",width).attr("height",height).selectAll("g").data(mainLayers).enter().append("g").attr("class",function(d){return d});var titleSelect=svg.select(".title");var chartSelect=svg.select(".chart");var legendSelect=svg.select(".legend");var chartLayers=["axis","seriesGroup"];chartSelect.classed(classed,true).attr("width",chartW).attr("height",chartH).attr("transform","translate(".concat(margin.left,",").concat(margin.top+titleH,")")).selectAll("g").data(chartLayers).enter().append("g").attr("class",function(d){return d});var componentBarsCircular=component.barsCircular().colorScale(colorScale).xScale(xScale).yScale(yScale).opacity(opacity).dispatch(dispatch).transition(transition);var componentCircularAxis=component.circularAxis().ringScale(xScale).radialScale(yScale);var componentCircularSectorLabels=component.circularSectorLabels().ringScale(xScale).radialScale(yScale).textAnchor("middle");var componentCircularRingLabels=component.circularRingLabels().radialScale(xScale).textAnchor("middle");var series=chartSelect.select(".seriesGroup").selectAll(".series").data(data);series.enter().append("g").classed("series",true).merge(series).attr("data-name",function(d){return d.key}).attr("transform",function(d,i){return"translate(".concat(coordinates[i].x,",").concat(coordinates[i].y,")")}).call(componentBarsCircular).call(componentCircularRingLabels);series.exit().remove();if(showAxis){var seriesAxis=chartSelect.select(".axis").selectAll(".seriesAxis").data(data);seriesAxis.enter().append("g").classed("seriesAxis",true).merge(seriesAxis).attr("transform",function(d,i){return"translate(".concat(coordinates[i].x,",").concat(coordinates[i].y,")")}).call(componentCircularAxis).call(componentCircularSectorLabels);seriesAxis.exit().remove()}else{chartSelect.selectAll(".axis").selectAll("*").remove()}if(title){var componentTitle=component.title().mainText(title).subText(subTitle);titleSelect.attr("transform","translate(".concat(width/2,",").concat(margin.top,")")).call(componentTitle)}else{titleSelect.selectAll("*").remove()}if(showLegend){var componentLegend=component.legend().colorScale(colorScale).title(legendTitle).height(legendH).width(legendW).itemType("rect").opacity(opacity);legendSelect.attr("transform","translate(".concat(margin.left+chartW+legendPad,",").concat(margin.top,")")).call(componentLegend)}else{legendSelect.selectAll("*").remove()}})}my.width=function(_v){if(!arguments.length)return width;width=_v;return this};my.height=function(_v){if(!arguments.length)return height;height=_v;return this};my.margin=function(_v){if(!arguments.length)return margin;margin=_v;return this};my.colors=function(_v){if(!arguments.length)return colors;colors=_v;return this};my.showLegend=function(_v){if(!arguments.length)return showLegend;showLegend=_v;return this};my.showAxis=function(_v){if(!arguments.length)return showAxis;showAxis=_v;return this};my.title=function(_v){if(!arguments.length)return title;title=_v;return this};my.subTitle=function(_v){if(!arguments.length)return subTitle;subTitle=_v;return this};my.opacity=function(_v){if(!arguments.length)return opacity;opacity=_v;return this};my.transition=function(_v){if(!arguments.length)return transition;transition=_v;return this};my.dispatch=function(_v){if(!arguments.length)return dispatch();dispatch=_v;return this};my.on=function(){var value=dispatch.on.apply(dispatch,arguments);return value===dispatch?my:value};return my}function chartBarChartVertical(){var classed="barChart";var width=700;var height=400;var margin={top:40,right:40,bottom:70,left:70};var colors=palette.categorical(1);var transition={ease:d3__namespace.easeLinear,duration:100};var dispatch=d3__namespace.dispatch("customValueMouseOver","customValueMouseOut","customValueClick","customSeriesMouseOver","customSeriesMouseOut","customSeriesClick");var title=null;var subTitle=null;var opacity=1;var showLegend=false;var showAxis=true;var yAxisLabel=null;var stacked=false;function my(selection){var svg=function(selection){var el=selection._groups[0][0];if(!!el.ownerSVGElement||el.tagName==="svg"){return selection}else{var svgSelection=selection.selectAll("svg").data(function(d){return[d]});return svgSelection.enter().append("svg").merge(svgSelection)}}(selection);selection.each(function(data){var legendW=showLegend?120:0;var legendH=Math.max(height/2.5,100);var legendPad=showLegend?15:0;var titleH=title?40:0;var chartW=Math.max(width-margin.left-legendPad-legendW-margin.right,100);var chartH=Math.max(height-margin.top-titleH-margin.bottom,100);var _dataTransform$summar=dataTransform(data).summary(),rowKeys=_dataTransform$summar.rowKeys,columnKeys=_dataTransform$summar.columnKeys,valueExtent=_dataTransform$summar.valueExtent,valueExtentStacked=_dataTransform$summar.valueExtentStacked;var _valueExtent=_slicedToArray(valueExtent,2),valueMin=_valueExtent[0],valueMax=_valueExtent[1];if(stacked){var _valueExtentStacked=_slicedToArray(valueExtentStacked,2);valueMin=_valueExtentStacked[0];valueMax=_valueExtentStacked[1]}else{valueMin=valueMin>0?0:valueMin}var yDomain=[valueMin,valueMax];var xScale2=d3__namespace.scaleBand().domain(rowKeys).range([0,chartW]).padding(.05);var xScale=d3__namespace.scaleBand().domain(columnKeys).range([0,xScale2.bandwidth()]).padding(.05);var yScale=d3__namespace.scaleLinear().domain(yDomain).range([chartH,0]);var colorScale=d3__namespace.scaleOrdinal().domain(columnKeys).range(colors);var mainLayers=["title","chart","legend"];svg.classed("d3ez",true).attr("width",width).attr("height",height).selectAll("g").data(mainLayers).enter().append("g").attr("class",function(d){return d});var titleSelect=svg.select(".title");var chartSelect=svg.select(".chart");var legendSelect=svg.select(".legend");var chartLayers=["xAxis axis","yAxis axis","seriesGroup"];chartSelect.classed(classed,true).attr("width",chartW).attr("height",chartH).attr("transform","translate(".concat(margin.left,",").concat(margin.top+titleH,")")).selectAll("g").data(chartLayers).enter().append("g").attr("class",function(d){return d});var componentBars=stacked?component.barsVerticalStacked().xScale(xScale2):component.barsVertical().xScale(xScale);componentBars.colorScale(colorScale).yScale(yScale).opacity(opacity).dispatch(dispatch).transition(transition);var series=chartSelect.select(".seriesGroup").selectAll(".series").data(data);series.enter().append("g").classed("series",true).merge(series).attr("data-name",function(d){return d.key}).attr("transform",function(d){return"translate(".concat(xScale2(d.key),",").concat(chartH-yScale(valueMin),")")}).call(componentBars);series.exit().remove();var xAxis=d3__namespace.axisBottom(xScale2);var yAxis=d3__namespace.axisLeft(yScale);if(showAxis){chartSelect.select(".xAxis").attr("transform","translate(0,".concat(chartH,")")).call(xAxis);chartSelect.select(".yAxis").call(yAxis);chartSelect.select(".yAxis").selectAll(".yAxisLabel").data([yAxisLabel]).enter().append("text").classed("yAxisLabel",true).attr("transform","rotate(-90)").attr("y",-40).attr("dy",".71em").attr("fill","currentColor").style("text-anchor","end").transition().text(function(d){return d})}else{chartSelect.selectAll(".axis").selectAll("*").remove()}if(title){var componentTitle=component.title().mainText(title).subText(subTitle);titleSelect.attr("transform","translate(".concat(width/2,",").concat(margin.top,")")).call(componentTitle)}else{titleSelect.selectAll("*").remove()}if(showLegend){var componentLegend=component.legend().colorScale(colorScale).height(legendH).width(legendW).itemType("rect").opacity(opacity);legendSelect.attr("transform","translate(".concat(margin.left+chartW+legendPad,",").concat(margin.top,")")).call(componentLegend)}else{legendSelect.selectAll("*").remove()}})}my.width=function(_v){if(!arguments.length)return width;width=_v;return this};my.height=function(_v){if(!arguments.length)return height;height=_v;return this};my.margin=function(_v){if(!arguments.length)return margin;margin=_v;return this};my.colors=function(_v){if(!arguments.length)return colors;colors=_v;return this};my.opacity=function(_v){if(!arguments.length)return opacity;opacity=_v;return this};my.stacked=function(_v){if(!arguments.length)return stacked;stacked=_v;return this};my.showAxis=function(_v){if(!arguments.length)return showAxis;showAxis=_v;return this};my.showLegend=function(_v){if(!arguments.length)return showLegend;showLegend=_v;return this};my.title=function(_v){if(!arguments.length)return title;title=_v;return this};my.subTitle=function(_v){if(!arguments.length)return subTitle;subTitle=_v;return this};my.yAxisLabel=function(_v){if(!arguments.length)return yAxisLabel;yAxisLabel=_v;return this};my.transition=function(_v){if(!arguments.length)return transition;transition=_v;return this};my.dispatch=function(_v){if(!arguments.length)return dispatch();dispatch=_v;return this};my.on=function(){var value=dispatch.on.apply(dispatch,arguments);return value===dispatch?my:value};return my}function chartBarChartHorizontal(){var classed="barChart";var width=700;var height=400;var margin={top:40,right:40,bottom:70,left:70};var colors=palette.categorical(1);var transition={ease:d3__namespace.easeLinear,duration:100};var dispatch=d3__namespace.dispatch("customValueMouseOver","customValueMouseOut","customValueClick","customSeriesMouseOver","customSeriesMouseOut","customSeriesClick");var title=null;var subTitle=null;var opacity=1;var showLegend=false;var showAxis=true;var yAxisLabel=null;var stacked=false;function my(selection){var svg=function(selection){var el=selection._groups[0][0];if(!!el.ownerSVGElement||el.tagName==="svg"){return selection}else{var svgSelection=selection.selectAll("svg").data(function(d){return[d]});return svgSelection.enter().append("svg").merge(svgSelection)}}(selection);selection.each(function(data){var legendW=showLegend?120:0;var legendH=Math.max(height/2.5,100);var legendPad=showLegend?15:0;var titleH=title?40:0;var chartW=Math.max(width-margin.left-legendPad-legendW-margin.right,100);var chartH=Math.max(height-margin.top-titleH-margin.bottom,100);var _dataTransform$summar=dataTransform(data).summary(),rowKeys=_dataTransform$summar.rowKeys,columnKeys=_dataTransform$summar.columnKeys,valueExtent=_dataTransform$summar.valueExtent,valueExtentStacked=_dataTransform$summar.valueExtentStacked;var _valueExtent=_slicedToArray(valueExtent,2),valueMin=_valueExtent[0],valueMax=_valueExtent[1];if(stacked){var _valueExtentStacked=_slicedToArray(valueExtentStacked,2);valueMin=_valueExtentStacked[0];valueMax=_valueExtentStacked[1]}else{valueMin=valueMin>0?0:valueMin}var yDomain=[valueMin,valueMax];var xScale=d3__namespace.scaleLinear().domain(yDomain).range([0,chartW]);var yScale2=d3__namespace.scaleBand().domain(rowKeys).range([0,chartH]).padding(.1);var yScale=d3__namespace.scaleBand().domain(columnKeys).range([0,yScale2.bandwidth()]).padding(.15);var colorScale=d3__namespace.scaleOrdinal().domain(columnKeys).range(colors);var mainLayers=["title","chart","legend"];svg.classed("d3ez",true).attr("width",width).attr("height",height).selectAll("g").data(mainLayers).enter().append("g").attr("class",function(d){return d});var titleSelect=svg.select(".title");var chartSelect=svg.select(".chart");var legendSelect=svg.select(".legend");var chartLayers=["xAxis axis","yAxis axis","seriesGroup"];chartSelect.classed(classed,true).attr("width",chartW).attr("height",chartH).attr("transform","translate(".concat(margin.left,",").concat(margin.top+titleH,")")).selectAll("g").data(chartLayers).enter().append("g").attr("class",function(d){return d});var componentBars=component.barsHorizontal().xScale(xScale).colorScale(colorScale).yScale(yScale).opacity(opacity).dispatch(dispatch).transition(transition);var series=chartSelect.select(".seriesGroup").selectAll(".series").data(data);series.enter().append("g").classed("series",true).merge(series).attr("data-name",function(d){return d.key}).attr("transform",function(d){return"translate(".concat(xScale(valueMin),",").concat(yScale2(d.key),")")}).call(componentBars);series.exit().remove();var xAxis=d3__namespace.axisBottom(xScale);var yAxis=d3__namespace.axisLeft(yScale2);if(showAxis){chartSelect.select(".xAxis").attr("transform","translate(0,".concat(chartH,")")).call(xAxis);chartSelect.select(".yAxis").call(yAxis).selectAll("text").call(wrap,margin.left)}else{chartSelect.selectAll(".axis").selectAll("*").remove()}if(title){var componentTitle=component.title().mainText(title).subText(subTitle);titleSelect.attr("transform","translate(".concat(width/2,",").concat(margin.top,")")).call(componentTitle)}else{titleSelect.selectAll("*").remove()}if(showLegend){var componentLegend=component.legend().colorScale(colorScale).height(legendH).width(legendW).itemType("rect").opacity(opacity);legendSelect.attr("transform","translate(".concat(margin.left+chartW+legendPad,",").concat(margin.top,")")).call(componentLegend)}else{legendSelect.selectAll("*").remove()}})}my.width=function(_v){if(!arguments.length)return width;width=_v;return this};my.height=function(_v){if(!arguments.length)return height;height=_v;return this};my.margin=function(_v){if(!arguments.length)return margin;margin=_v;return this};my.colors=function(_v){if(!arguments.length)return colors;colors=_v;return this};my.showLegend=function(_v){if(!arguments.length)return showLegend;showLegend=_v;return this};my.title=function(_v){if(!arguments.length)return title;title=_v;return this};my.subTitle=function(_v){if(!arguments.length)return subTitle;subTitle=_v;return this};my.opacity=function(_v){if(!arguments.length)return opacity;opacity=_v;return this};my.stacked=function(_v){if(!arguments.length)return stacked;stacked=_v;return this};my.showAxis=function(_v){if(!arguments.length)return showAxis;showAxis=_v;return this};my.yAxisLabel=function(_v){if(!arguments.length)return yAxisLabel;yAxisLabel=_v;return this};my.transition=function(_v){if(!arguments.length)return transition;transition=_v;return this};my.dispatch=function(_v){if(!arguments.length)return dispatch();dispatch=_v;return this};my.on=function(){var value=dispatch.on.apply(dispatch,arguments);return value===dispatch?my:value};return my}function chartBubbleChart(){var classed="bubbleChart";var width=700;var height=400;var margin={top:40,right:40,bottom:70,left:70};var colors=palette.categorical(1);var transition={ease:d3__namespace.easeLinear,duration:100};var dispatch=d3__namespace.dispatch("customValueMouseOver","customValueMouseOut","customValueClick","customSeriesMouseOver","customSeriesMouseOut","customSeriesClick");var title=null;var subTitle=null;var legendTitle="Key";var opacity=1;var showLegend=false;var showAxis=true;var yAxisLabel=null;var minRadius=3;var maxRadius=20;function my(selection){var svg=function(selection){var el=selection._groups[0][0];if(!!el.ownerSVGElement||el.tagName==="svg"){return selection}else{var svgSelection=selection.selectAll("svg").data(function(d){return[d]});return svgSelection.enter().append("svg").merge(svgSelection)}}(selection);selection.each(function(data){var legendW=showLegend?120:0;var legendH=Math.max(height/2.5,100);var legendPad=showLegend?15:0;var titleH=title?40:0;var chartW=Math.max(width-margin.left-legendPad-legendW-margin.right,100);var chartH=Math.max(height-margin.top-titleH-margin.bottom,100);var _dataTransform$summar=dataTransform(data).summary(),rowKeys=_dataTransform$summar.rowKeys,_dataTransform$summar2=_dataTransform$summar.coordinatesExtent,xExtent=_dataTransform$summar2.x,yExtent=_dataTransform$summar2.y,valueExtent=_dataTransform$summar.valueExtent;var xScale=d3__namespace.scaleLinear().domain(xExtent).range([0,chartW]).nice();var yScale=d3__namespace.scaleLinear().domain(yExtent).range([chartH,0]).nice();var colorScale=d3__namespace.scaleOrdinal().domain(rowKeys).range(colors);var sizeScale=d3__namespace.scaleLinear().domain(valueExtent).range([minRadius,maxRadius]);var mainLayers=["title","chart","legend"];svg.classed("d3ez",true).attr("width",width).attr("height",height).selectAll("g").data(mainLayers).enter().append("g").attr("class",function(d){return d});var titleSelect=svg.select(".title");var chartSelect=svg.select(".chart");var legendSelect=svg.select(".legend");var chartLayers=["xAxis axis","yAxis axis","seriesGroup","zoomArea","clipArea"];chartSelect.classed(classed,true).attr("width",chartW).attr("height",chartH).attr("transform","translate(".concat(margin.left,",").concat(margin.top+titleH,")")).selectAll("g").data(chartLayers).enter().append("g").attr("class",function(d){return d});var componentBubbles=component.bubbles().xScale(xScale).yScale(yScale).colorScale(colorScale).sizeScale(sizeScale).opacity(opacity).dispatch(dispatch).transition(transition);var series=chartSelect.select(".seriesGroup").selectAll(".series").data(data);series.enter().append("g").attr("class","series").attr("clip-path","url(#plotAreaClip)").merge(series).attr("data-name",function(d){return d.key}).call(componentBubbles);series.exit().remove();var xAxis=d3__namespace.axisBottom(xScale);var yAxis=d3__namespace.axisLeft(yScale);if(showAxis){chartSelect.select(".xAxis").attr("transform","translate(0,".concat(chartH,")")).call(xAxis).selectAll("text").style("text-anchor","end").attr("dx","-.8em").attr("dy",".15em").attr("transform","rotate(-65)");chartSelect.select(".yAxis").call(yAxis)}else{chartSelect.selectAll(".axis").selectAll("*").remove()}var clipPath=chartSelect.select(".clipArea").selectAll("defs").data([0]);clipPath.enter().append("defs").append("clipPath").attr("id","plotAreaClip").append("rect").attr("width",chartW).attr("height",chartH).merge(clipPath).select("clipPath").select("rect").attr("width",chartW).attr("height",chartH);var zoom=d3__namespace.zoom().extent([[0,0],[chartW,chartH]]).scaleExtent([1,8]).translateExtent([[0,0],[chartW,chartH]]).on("zoom",zoomed);function zoomed(e){var xScaleZoomed=e.transform.rescaleX(xScale);var yScaleZoomed=e.transform.rescaleY(yScale);if(showAxis){xAxis.scale(xScaleZoomed);chartSelect.select(".xAxis").call(xAxis).selectAll("text").style("text-anchor","end").attr("dx","-.8em").attr("dy",".15em").attr("transform","rotate(-65)");yAxis.scale(yScaleZoomed);chartSelect.select(".yAxis").call(yAxis)}componentBubbles.xScale(xScaleZoomed).yScale(yScaleZoomed).transition({ease:d3__namespace.easeLinear,duration:0});chartSelect.select(".seriesGroup").selectAll(".series").call(componentBubbles)}var zoomArea=chartSelect.select(".zoomArea").selectAll("rect").data([0]);zoomArea.enter().append("rect").attr("fill","none").attr("pointer-events","all").merge(zoomArea).call(zoom).attr("width",chartW).attr("height",chartH);if(title){var componentTitle=component.title().mainText(title).subText(subTitle);titleSelect.attr("transform","translate(".concat(width/2,",").concat(margin.top,")")).call(componentTitle)}else{titleSelect.selectAll("*").remove()}if(showLegend){var componentLegend=component.legend().title(legendTitle).sizeScale(sizeScale).height(legendH).width(legendW).opacity(opacity);legendSelect.attr("transform","translate(".concat(margin.left+chartW+legendPad,",").concat(margin.top,")")).call(componentLegend)}else{legendSelect.selectAll("*").remove()}})}my.width=function(_v){if(!arguments.length)return width;width=_v;return this};my.height=function(_v){if(!arguments.length)return height;height=_v;return this};my.margin=function(_v){if(!arguments.length)return margin;margin=_v;return this};my.colors=function(_v){if(!arguments.length)return colors;colors=_v;return this};my.showLegend=function(_v){if(!arguments.length)return showLegend;showLegend=_v;return this};my.title=function(_v){if(!arguments.length)return title;title=_v;return this};my.subTitle=function(_v){if(!arguments.length)return subTitle;subTitle=_v;return this};my.opacity=function(_v){if(!arguments.length)return opacity;opacity=_v;return this};my.yAxisLabel=function(_v){if(!arguments.length)return yAxisLabel;yAxisLabel=_v;return this};my.showAxis=function(_v){if(!arguments.length)return showAxis;showAxis=_v;return this};my.transition=function(_v){if(!arguments.length)return transition;transition=_v;return this};my.dispatch=function(_v){if(!arguments.length)return dispatch();dispatch=_v;return this};my.on=function(){var value=dispatch.on.apply(dispatch,arguments);return value===dispatch?my:value};return my}function chartCandlestickChart(){var classed="candlestickChart";var width=700;var height=400;var margin={top:40,right:40,bottom:70,left:70};var colors=["green","red"];var transition={ease:d3__namespace.easeLinear,duration:100};var dispatch=d3__namespace.dispatch("customValueMouseOver","customValueMouseOut","customValueClick","customSeriesMouseOver","customSeriesMouseOut","customSeriesClick");var title=null;var subTitle=null;var opacity=1;var showLegend=false;var showAxis=true;var yAxisLabel=null;function my(selection){var svg=function(selection){var el=selection._groups[0][0];if(!!el.ownerSVGElement||el.tagName==="svg"){return selection}else{var svgSelection=selection.selectAll("svg").data(function(d){return[d]});return svgSelection.enter().append("svg").merge(svgSelection)}}(selection);selection.each(function(data){var legendW=showLegend?120:0;var legendH=Math.max(height/2.5,100);var legendPad=showLegend?15:0;var titleH=title?40:0;var chartW=Math.max(width-margin.left-legendPad-legendW-margin.right,100);var chartH=Math.max(height-margin.top-titleH-margin.bottom,100);data=data[0];data.values.forEach(function(d,i){data.values[i].date=Date.parse(d.date)});var maxDate=d3__namespace.max(data.values,function(d){return d.date});var minDate=d3__namespace.min(data.values,function(d){return d.date});var ONE_DAY_IN_MILLISECONDS=864e5;var dateDomain=[new Date(minDate-ONE_DAY_IN_MILLISECONDS),new Date(maxDate+ONE_DAY_IN_MILLISECONDS)];var yDomain=[d3__namespace.min(data.values,function(d){return d.low}),d3__namespace.max(data.values,function(d){return d.high})];var xScale=d3__namespace.scaleTime().domain(dateDomain).range([0,chartW]);var yScale=d3__namespace.scaleLinear().domain(yDomain).range([chartH,0]).nice();var colorScale=d3__namespace.scaleOrdinal().domain([true,false]).range(colors);var mainLayers=["title","chart","legend"];svg.classed("d3ez",true).attr("width",width).attr("height",height).selectAll("g").data(mainLayers).enter().append("g").attr("class",function(d){return d});var titleSelect=svg.select(".title");var chartSelect=svg.select(".chart");var legendSelect=svg.select(".legend");var chartLayers=["xAxis axis","yAxis axis","seriesGroup","zoomArea","clipArea"];chartSelect.classed(classed,true).attr("width",chartW).attr("height",chartH).attr("transform","translate(".concat(margin.left,",").concat(margin.top+titleH,")")).selectAll("g").data(chartLayers).enter().append("g").attr("class",function(d){return d});var componentCandleSticks=component.candleSticks().xScale(xScale).yScale(yScale).colorScale(colorScale).dispatch(dispatch).opacity(opacity).transition(transition);var series=chartSelect.select(".seriesGroup").selectAll(".series").data([data]);series.enter().append("g").attr("class","series").merge(series).attr("data-name",function(d){return d.key}).call(componentCandleSticks);series.exit().remove();var xAxis=d3__namespace.axisBottom(xScale).tickFormat(d3__namespace.timeFormat("%d-%b-%y"));var yAxis=d3__namespace.axisLeft(yScale);if(showAxis){chartSelect.select(".xAxis").attr("transform","translate(0,".concat(chartH,")")).call(xAxis).selectAll("text").style("text-anchor","end").attr("dx","-.8em").attr("dy",".15em").attr("transform","rotate(-65)");chartSelect.select(".yAxis").call(yAxis);chartSelect.select(".yAxis").selectAll(".yAxisLabel").data([yAxisLabel]).enter().append("text").classed("yAxisLabel",true).attr("transform","rotate(-90)").attr("y",-40).attr("dy",".71em").attr("fill","currentColor").style("text-anchor","end").transition().text(function(d){return d})}else{chartSelect.selectAll(".axis").selectAll("*").remove()}function brushStart(e){console.log(e)}function brushEnd(e){console.log(e)}var brush=d3__namespace.brushX().extent([[0,0],[chartW,chartH]]).on("brush start",brushStart).on("brush end",brushEnd);chartSelect.select(".zoomArea").call(brush);if(title){var componentTitle=component.title().mainText(title).subText(subTitle);titleSelect.attr("transform","translate(".concat(width/2,",").concat(margin.top,")")).call(componentTitle)}else{titleSelect.selectAll("*").remove()}if(showLegend){var componentLegend=component.legend().colorScale(colorScale).height(legendH).width(legendW).itemType("line").opacity(opacity);legendSelect.attr("transform","translate(".concat(margin.left+chartW+legendPad,",").concat(margin.top,")")).call(componentLegend)}else{legendSelect.selectAll("*").remove()}})}my.width=function(_v){if(!arguments.length)return width;width=_v;return this};my.height=function(_v){if(!arguments.length)return height;height=_v;return this};my.margin=function(_v){if(!arguments.length)return margin;margin=_v;return this};my.colors=function(_v){if(!arguments.length)return colors;colors=_v;return this};my.showLegend=function(_v){if(!arguments.length)return showLegend;showLegend=_v;return this};my.title=function(_v){if(!arguments.length)return title;title=_v;return this};my.subTitle=function(_v){if(!arguments.length)return subTitle;subTitle=_v;return this};my.opacity=function(_v){if(!arguments.length)return opacity;opacity=_v;return this};my.showAxis=function(_v){if(!arguments.length)return showAxis;showAxis=_v;return this};my.yAxisLabel=function(_v){if(!arguments.length)return yAxisLabel;yAxisLabel=_v;return this};my.transition=function(_v){if(!arguments.length)return transition;transition=_v;return this};my.dispatch=function(_v){if(!arguments.length)return dispatch();dispatch=_v;return this};my.on=function(){var value=dispatch.on.apply(dispatch,arguments);return value===dispatch?my:value};return my}function chartDonutChart(){var classed="donutChart";var width=700;var height=400;var margin={top:40,right:40,bottom:40,left:40};var colors=palette.categorical(3);var transition={ease:d3__namespace.easeLinear,duration:100};var dispatch=d3__namespace.dispatch("customValueMouseOver","customValueMouseOut","customValueClick","customSeriesMouseOver","customSeriesMouseOut","customSeriesClick");var title=null;var subTitle=null;var opacity=1;var showLegend=false;var showAxis=true;var startAngle=0;var endAngle=360;function my(selection){var svg=function(selection){var el=selection._groups[0][0];if(!!el.ownerSVGElement||el.tagName==="svg"){return selection}else{var svgSelection=selection.selectAll("svg").data(function(d){return[d]});return svgSelection.enter().append("svg").merge(svgSelection)}}(selection);selection.each(function(data){var legendW=showLegend?120:0;var legendH=Math.max(height/2.5,100);var legendPad=showLegend?15:0;var titleH=title?40:0;var chartW=Math.max(width-margin.left-legendPad-legendW-margin.right,100);var chartH=Math.max(height-margin.top-titleH-margin.bottom,100);var _generateLayout=generateLayout(data.length,chartW,chartH),coordinates=_generateLayout.coordinates,radius=_generateLayout.cellRadius;var innerRadius=radius/2;var _dataTransform$summar=dataTransform(data).summary(),columnKeys=_dataTransform$summar.columnKeys,valueExtent=_dataTransform$summar.valueExtent;var xScale=d3__namespace.scaleBand().domain(columnKeys).range([innerRadius,radius]);var yScale=d3__namespace.scaleLinear().domain(valueExtent).range([startAngle,endAngle]);var colorScale=d3__namespace.scaleOrdinal().domain(columnKeys).range(colors);var mainLayers=["title","chart","legend"];svg.classed("d3ez",true).attr("width",width).attr("height",height).selectAll("g").data(mainLayers).enter().append("g").attr("class",function(d){return d});var titleSelect=svg.select(".title");var chartSelect=svg.select(".chart");var legendSelect=svg.select(".legend");var chartLayers=["seriesGroup","axis"];chartSelect.classed(classed,true).attr("width",chartW).attr("height",chartH).attr("transform","translate(".concat(margin.left,",").concat(margin.top+titleH,")")).selectAll("g").data(chartLayers).enter().append("g").attr("class",function(d){return d});var componentDonut=component.donut().xScale(xScale).yScale(yScale).colorScale(colorScale).opacity(opacity).dispatch(dispatch).transition(transition);var componentDonutLabels=component.donutLabels().xScale(xScale).yScale(yScale).transition(transition);var series=chartSelect.select(".seriesGroup").selectAll(".series").data(data);series.enter().append("g").classed("series",true).merge(series).attr("data-name",function(d){return d.key}).attr("transform",function(d,i){return"translate(".concat(coordinates[i].x,",").concat(coordinates[i].y,")")}).call(componentDonut);series.exit().remove();if(showAxis){var seriesAxis=chartSelect.select(".axis").selectAll(".seriesAxis").data(data);seriesAxis.enter().append("g").classed("seriesAxis",true).merge(seriesAxis).attr("transform",function(d,i){return"translate(".concat(coordinates[i].x,",").concat(coordinates[i].y,")")}).call(componentDonutLabels);seriesAxis.exit().remove()}else{chartSelect.selectAll(".axis").selectAll("*").remove()}if(title){var componentTitle=component.title().mainText(title).subText(subTitle);titleSelect.attr("transform","translate(".concat(width/2,",").concat(margin.top,")")).call(componentTitle)}else{titleSelect.selectAll("*").remove()}if(showLegend){var componentLegend=component.legend().colorScale(colorScale).height(legendH).width(legendW).itemType("rect").opacity(opacity);legendSelect.attr("transform","translate(".concat(margin.left+chartW+legendPad,",").concat(margin.top,")")).call(componentLegend)}else{legendSelect.selectAll("*").remove()}})}my.width=function(_v){if(!arguments.length)return width;width=_v;return this};my.height=function(_v){if(!arguments.length)return height;height=_v;return this};my.margin=function(_v){if(!arguments.length)return margin;margin=_v;return this};my.colors=function(_v){if(!arguments.length)return colors;colors=_v;return this};my.showLegend=function(_v){if(!arguments.length)return showLegend;showLegend=_v;return this};my.showAxis=function(_v){if(!arguments.length)return showAxis;showAxis=_v;return this};my.title=function(_v){if(!arguments.length)return title;title=_v;return this};my.subTitle=function(_v){if(!arguments.length)return subTitle;subTitle=_v;return this};my.opacity=function(_v){if(!arguments.length)return opacity;opacity=_v;return this};my.transition=function(_v){if(!arguments.length)return transition;transition=_v;return this};my.dispatch=function(_v){if(!arguments.length)return dispatch();dispatch=_v;return this};my.on=function(){var value=dispatch.on.apply(dispatch,arguments);return value===dispatch?my:value};return my}function chartHeatMapRadial(){var classed="heatMapRadial";var width=700;var height=400;var margin={top:40,right:40,bottom:40,left:40};var colors=palette.diverging(2).slice(0,5);var transition={ease:d3__namespace.easeLinear,duration:100};var dispatch=d3__namespace.dispatch("customValueMouseOver","customValueMouseOut","customValueClick","customSeriesMouseOver","customSeriesMouseOut","customSeriesClick");var title=null;var subTitle=null;var opacity=1;var showLegend=false;var showAxis=true;var startAngle=0;var endAngle=270;var thresholds;function my(selection){var svg=function(selection){var el=selection._groups[0][0];if(!!el.ownerSVGElement||el.tagName==="svg"){return selection}else{var svgSelection=selection.selectAll("svg").data(function(d){return[d]});return svgSelection.enter().append("svg").merge(svgSelection)}}(selection);selection.each(function(data){var legendW=showLegend?120:0;var legendH=Math.max(height/2.5,100);var legendPad=showLegend?15:0;var titleH=title?40:0;var chartW=Math.max(width-margin.left-legendPad-legendW-margin.right,100);var chartH=Math.max(height-margin.top-titleH-margin.bottom,100);var radius=Math.min(chartW,chartH)/2.3;var innerRadius=radius/4;var _dataTransform$summar=dataTransform(data).summary(),rowKeys=_dataTransform$summar.rowKeys,columnKeys=_dataTransform$summar.columnKeys,tmpThresholds=_dataTransform$summar.thresholds;if(typeof thresholds==="undefined"){thresholds=tmpThresholds}var xScale=d3__namespace.scaleBand().domain(columnKeys).rangeRound([startAngle,endAngle]).padding(.1);var yScale=d3__namespace.scaleBand().domain(rowKeys).rangeRound([innerRadius,radius]).padding(.1);var colorScale=d3__namespace.scaleThreshold().domain(thresholds).range(colors);var mainLayers=["title","chart","legend"];svg.classed("d3ez",true).attr("width",width).attr("height",height).selectAll("g").data(mainLayers).enter().append("g").attr("class",function(d){return d});var titleSelect=svg.select(".title");var chartSelect=svg.select(".chart");var legendSelect=svg.select(".legend");var chartLayers=["seriesGroup","axis"];chartSelect.classed(classed,true).attr("width",chartW).attr("height",chartH).attr("transform","translate(".concat(margin.left,",").concat(margin.top+titleH,")")).selectAll("g").data(chartLayers).enter().append("g").attr("class",function(d){return d});var componentHeatMapRing=component.heatMapRing().colorScale(colorScale).xScale(xScale).yScale(yScale).opacity(opacity).dispatch(dispatch).transition(transition);var componentCircularSectorLabels=component.circularSectorLabels().ringScale(yScale).radialScale(xScale).textAnchor("start");var componentCircularRingLabels=component.circularRingLabels().radialScale(yScale).textAnchor("middle");var series=chartSelect.select(".seriesGroup").selectAll(".series").data(data);series.enter().append("g").attr("class","series").merge(series).attr("data-name",function(d){return d.key}).attr("transform","translate(".concat(chartW/2,",").concat(chartH/2,")")).call(componentHeatMapRing);series.exit().remove();if(showAxis){chartSelect.select(".axis").attr("transform","translate(".concat(chartW/2,",").concat(chartH/2,")")).call(componentCircularSectorLabels).call(componentCircularRingLabels)}else{chartSelect.selectAll(".axis").selectAll("*").remove()}if(title){var componentTitle=component.title().mainText(title).subText(subTitle);titleSelect.attr("transform","translate(".concat(width/2,",").concat(margin.top,")")).call(componentTitle)}else{titleSelect.selectAll("*").remove()}if(showLegend){var componentLegend=component.legend().colorScale(colorScale).height(legendH).width(legendW).opacity(opacity);legendSelect.attr("transform","translate(".concat(margin.left+chartW+legendPad,",").concat(margin.top,")")).call(componentLegend)}else{legendSelect.selectAll("*").remove()}})}my.width=function(_v){if(!arguments.length)return width;width=_v;return this};my.height=function(_v){if(!arguments.length)return height;height=_v;return this};my.margin=function(_v){if(!arguments.length)return margin;margin=_v;return this};my.colors=function(_v){if(!arguments.length)return colors;colors=_v;return this};my.showLegend=function(_v){if(!arguments.length)return showLegend;showLegend=_v;return this};my.showAxis=function(_v){if(!arguments.length)return showAxis;showAxis=_v;return this};my.title=function(_v){if(!arguments.length)return title;title=_v;return this};my.subTitle=function(_v){if(!arguments.length)return subTitle;subTitle=_v;return this};my.opacity=function(_v){if(!arguments.length)return opacity;opacity=_v;return this};my.thresholds=function(_v){if(!arguments.length)return thresholds;thresholds=_v;return my};my.transition=function(_v){if(!arguments.length)return transition;transition=_v;return this};my.dispatch=function(_v){if(!arguments.length)return dispatch();dispatch=_v;return this};my.on=function(){var value=dispatch.on.apply(dispatch,arguments);return value===dispatch?my:value};return my}function chartHeatMap(){var classed="heatMap";var width=700;var height=400;var margin={top:40,right:40,bottom:70,left:70};var colors=palette.diverging(2).slice(0,5);var transition={ease:d3__namespace.easeLinear,duration:100};var dispatch=d3__namespace.dispatch("customValueMouseOver","customValueMouseOut","customValueClick","customSeriesMouseOver","customSeriesMouseOut","customSeriesClick");var title=null;var subTitle=null;var opacity=1;var showLegend=false;var showAxis=true;var thresholds;function my(selection){var svg=function(selection){var el=selection._groups[0][0];if(!!el.ownerSVGElement||el.tagName==="svg"){return selection}else{var svgSelection=selection.selectAll("svg").data(function(d){return[d]});return svgSelection.enter().append("svg").merge(svgSelection)}}(selection);selection.each(function(data){var legendW=showLegend?120:0;var legendH=Math.max(height/2.5,100);var legendPad=showLegend?15:0;var titleH=title?40:0;var chartW=Math.max(width-margin.left-legendPad-legendW-margin.right,100);var chartH=Math.max(height-margin.top-titleH-margin.bottom,100);var _dataTransform$summar=dataTransform(data).summary(),rowKeys=_dataTransform$summar.rowKeys,columnKeys=_dataTransform$summar.columnKeys,tmpThresholds=_dataTransform$summar.thresholds;if(typeof thresholds==="undefined"){thresholds=tmpThresholds}var xScale=d3__namespace.scaleBand().domain(columnKeys).range([0,chartW]).padding(.15);var yScale=d3__namespace.scaleBand().domain(rowKeys).range([0,chartH]).padding(.15);var colorScale=d3__namespace.scaleThreshold().domain(thresholds).range(colors);var mainLayers=["title","chart","legend"];svg.classed("d3ez",true).attr("width",width).attr("height",height).selectAll("g").data(mainLayers).enter().append("g").attr("class",function(d){return d});var titleSelect=svg.select(".title");var chartSelect=svg.select(".chart");var legendSelect=svg.select(".legend");var chartLayers=["xAxis axis","yAxis axis","seriesGroup"];chartSelect.classed(classed,true).attr("width",chartW).attr("height",chartH).attr("transform","translate(".concat(margin.left,",").concat(margin.top+titleH,")")).selectAll("g").data(chartLayers).enter().append("g").attr("class",function(d){return d});var componentHeatMapRow=component.heatMapRow().xScale(xScale).yScale(yScale).colorScale(colorScale).opacity(opacity).dispatch(dispatch).transition(transition);var series=chartSelect.select(".seriesGroup").selectAll(".series").data(data);series.enter().append("g").attr("class","series").merge(series).attr("data-name",function(d){return d.key}).attr("transform",function(d){return"translate(0,".concat(yScale(d.key),")")}).call(componentHeatMapRow);series.exit().remove();var xAxis=d3__namespace.axisBottom(xScale);var yAxis=d3__namespace.axisLeft(yScale);if(showAxis){chartSelect.select(".xAxis").attr("transform","translate(0,".concat(chartH,")")).call(xAxis).selectAll("text").attr("y",0).attr("x",-8).attr("transform","rotate(300)").style("text-anchor","end").call(wrap,margin.bottom);chartSelect.select(".yAxis").call(yAxis)}else{chartSelect.selectAll(".axis").selectAll("*").remove()}if(title){var componentTitle=component.title().mainText(title).subText(subTitle);titleSelect.attr("transform","translate(".concat(width/2,",").concat(margin.top,")")).call(componentTitle)}else{titleSelect.selectAll("*").remove()}if(showLegend){var componentLegend=component.legend().colorScale(colorScale).height(legendH).width(legendW).opacity(opacity);legendSelect.attr("transform","translate(".concat(margin.left+chartW+legendPad,",").concat(margin.top,")")).call(componentLegend)}else{legendSelect.selectAll("*").remove()}})}my.width=function(_v){if(!arguments.length)return width;width=_v;return this};my.height=function(_v){if(!arguments.length)return height;height=_v;return this};my.margin=function(_v){if(!arguments.length)return margin;margin=_v;return this};my.colors=function(_v){if(!arguments.length)return colors;colors=_v;return this};my.showLegend=function(_v){if(!arguments.length)return showLegend;showLegend=_v;return this};my.title=function(_v){if(!arguments.length)return title;title=_v;return this};my.subTitle=function(_v){if(!arguments.length)return subTitle;subTitle=_v;return this};my.opacity=function(_v){if(!arguments.length)return opacity;opacity=_v;return this};my.thresholds=function(_v){if(!arguments.length)return thresholds;thresholds=_v;return this};my.showAxis=function(_v){if(!arguments.length)return showAxis;showAxis=_v;return this};my.transition=function(_v){if(!arguments.length)return transition;transition=_v;return this};my.dispatch=function(_v){if(!arguments.length)return dispatch();dispatch=_v;return this};my.on=function(){var value=dispatch.on.apply(dispatch,arguments);return value===dispatch?my:value};return my}function chartLineChart(){var classed="lineChart";var width=700;var height=400;var margin={top:40,right:40,bottom:70,left:70};var colors=palette.categorical(1);var transition={ease:d3__namespace.easeLinear,duration:100};var dispatch=d3__namespace.dispatch("customValueMouseOver","customValueMouseOut","customValueClick","customSeriesMouseOver","customSeriesMouseOut","customSeriesClick");var title=null;var subTitle=null;var opacity=1;var showLegend=false;var showAxis=true;var yAxisLabel=null;function my(selection){var svg=function(selection){var el=selection._groups[0][0];if(!!el.ownerSVGElement||el.tagName==="svg"){return selection}else{var svgSelection=selection.selectAll("svg").data(function(d){return[d]});return svgSelection.enter().append("svg").merge(svgSelection)}}(selection);selection.each(function(data){var legendW=showLegend?120:0;var legendH=Math.max(height/2.5,100);var legendPad=showLegend?15:0;var titleH=title?40:0;var chartW=Math.max(width-margin.left-legendPad-legendW-margin.right,100);var chartH=Math.max(height-margin.top-margin.bottom-titleH,100);var _dataTransform$summar=dataTransform(data).summary(),rowKeys=_dataTransform$summar.rowKeys,columnKeys=_dataTransform$summar.columnKeys,valueMin=_dataTransform$summar.valueMin,valueMax=_dataTransform$summar.valueMax;valueMin=valueMin>0?0:valueMin;var valueExtent=[valueMin,valueMax];var xScale=d3__namespace.scalePoint().domain(columnKeys).range([0,chartW]);function isTimeSeriesData(data){var dateString=data[0].values[0].date;var dateObject=new Date(dateString);return!isNaN(dateObject.getTime())}var isTimeSeries=isTimeSeriesData(data);if(isTimeSeries){data.forEach(function(d,i){d.values.forEach(function(b,j){data[i].values[j].key=new Date(b.date)})});var dateExtent=d3__namespace.extent(data[0].values,function(d){return d.key});xScale=d3__namespace.scaleTime().domain(dateExtent).range([0,chartW])}var yScale=d3__namespace.scaleLinear().domain(valueExtent).range([chartH,0]).nice();var colorScale=d3__namespace.scaleOrdinal().domain(rowKeys).range(colors);var mainLayers=["title","chart","legend"];svg.classed("d3ez",true).attr("width",width).attr("height",height).selectAll("g").data(mainLayers).enter().append("g").attr("class",function(d){return d});var titleSelect=svg.select(".title");var chartSelect=svg.select(".chart");var legendSelect=svg.select(".legend");var chartLayers=["xAxis axis","yAxis axis","seriesGroup","zoomArea","clipArea"];chartSelect.classed(classed,true).attr("width",chartW).attr("height",chartH).attr("transform","translate(".concat(margin.left,",").concat(margin.top+titleH,")")).selectAll("g").data(chartLayers).enter().append("g").attr("class",function(d){return d});var componentLineChart=component.lineChart().colorScale(colorScale).xScale(xScale).yScale(yScale).opacity(opacity).dispatch(dispatch).transition(transition);var componentScatterPlot=component.scatterPlot().colorScale(colorScale).yScale(yScale).xScale(xScale).opacity(opacity).dispatch(dispatch).transition(transition);var series=chartSelect.select(".seriesGroup").selectAll(".series").data(data);series.enter().append("g").attr("class","series").attr("clip-path","url(#plotAreaClip)").merge(series).attr("data-name",function(d){return d.key}).call(componentLineChart).call(componentScatterPlot);series.exit().remove();var xAxis=d3__namespace.axisBottom(xScale);var yAxis=d3__namespace.axisLeft(yScale);if(showAxis){chartSelect.select(".xAxis").attr("transform","translate(0,".concat(chartH,")")).call(xAxis);chartSelect.select(".yAxis").call(yAxis);chartSelect.select(".yAxis").selectAll(".yAxisLabel").data([yAxisLabel]).enter().append("text").classed("yAxisLabel",true).attr("transform","rotate(-90)").attr("y",-40).attr("dy",".71em").attr("fill","currentColor").style("text-anchor","end").text(function(d){return d})}else{chartSelect.selectAll(".axis").selectAll("*").remove()}var clipPath=chartSelect.select(".clipArea").selectAll("defs").data([0]);clipPath.enter().append("defs").append("clipPath").attr("id","plotAreaClip").append("rect").attr("width",chartW).attr("height",chartH).merge(clipPath).select("clipPath").select("rect").attr("width",chartW).attr("height",chartH);var zoom=d3__namespace.zoom().extent([[0,0],[chartW,chartH]]).scaleExtent([1,8]).translateExtent([[0,0],[chartW,chartH]]).on("zoom",zoomed);function zoomed(e){var xScaleZoomed=e.transform.rescaleX(xScale);if(showAxis){xAxis.scale(xScaleZoomed);chartSelect.select(".xAxis").call(xAxis)}componentLineChart.xScale(xScaleZoomed).transition({ease:d3__namespace.easeLinear,duration:0});componentScatterPlot.xScale(xScaleZoomed).transition({ease:d3__namespace.easeLinear,duration:0});chartSelect.select(".seriesGroup").selectAll(".series").call(componentLineChart).call(componentScatterPlot)}if(isTimeSeries){var zoomArea=chartSelect.select(".zoomArea").selectAll("rect").data([0]);zoomArea.enter().append("rect").attr("fill","none").attr("pointer-events","all").merge(zoomArea).call(zoom).attr("width",chartW).attr("height",chartH)}if(title){var componentTitle=component.title().mainText(title).subText(subTitle);titleSelect.attr("transform","translate(".concat(width/2,",").concat(margin.top,")")).call(componentTitle)}else{titleSelect.selectAll("*").remove()}if(showLegend){var componentLegend=component.legend().colorScale(colorScale).height(legendH).width(legendW).itemType("line").opacity(opacity);legendSelect.attr("transform","translate(".concat(margin.left+chartW+legendPad,",").concat(margin.top,")")).call(componentLegend)}else{legendSelect.selectAll("*").remove()}})}my.width=function(_v){if(!arguments.length)return width;width=_v;return this};my.height=function(_v){if(!arguments.length)return height;height=_v;return this};my.margin=function(_v){if(!arguments.length)return margin;margin=_v;return this};my.colors=function(_v){if(!arguments.length)return colors;colors=_v;return this};my.showLegend=function(_v){if(!arguments.length)return showLegend;showLegend=_v;return this};my.title=function(_v){if(!arguments.length)return title;title=_v;return this};my.subTitle=function(_v){if(!arguments.length)return subTitle;subTitle=_v;return this};my.opacity=function(_v){if(!arguments.length)return opacity;opacity=_v;return this};my.showAxis=function(_v){if(!arguments.length)return showAxis;showAxis=_v;return this};my.yAxisLabel=function(_v){if(!arguments.length)return yAxisLabel;yAxisLabel=_v;return this};my.transition=function(_v){if(!arguments.length)return transition;transition=_v;return this};my.dispatch=function(_v){if(!arguments.length)return dispatch();dispatch=_v;return this};my.on=function(){var value=dispatch.on.apply(dispatch,arguments);return value===dispatch?my:value};return my}function chartPolarAreaChart(){var classed="polarAreaChart";var width=700;var height=400;var margin={top:40,right:40,bottom:40,left:40};var colors=palette.categorical(3);var transition={ease:d3__namespace.easeLinear,duration:100};var dispatch=d3__namespace.dispatch("customValueMouseOver","customValueMouseOut","customValueClick","customSeriesMouseOver","customSeriesMouseOut","customSeriesClick");var title=null;var subTitle=null;var opacity=1;var showLegend=false;var showAxis=true;var startAngle=0;var endAngle=360;function my(selection){var svg=function(selection){var el=selection._groups[0][0];if(!!el.ownerSVGElement||el.tagName==="svg"){return selection}else{var svgSelection=selection.selectAll("svg").data(function(d){return[d]});return svgSelection.enter().append("svg").merge(svgSelection)}}(selection);selection.each(function(data){var legendW=showLegend?120:0;var legendH=Math.max(height/2.5,100);var legendPad=showLegend?15:0;var titleH=title?40:0;var chartW=Math.max(width-margin.left-legendPad-legendW-margin.right,100);var chartH=Math.max(height-margin.top-titleH-margin.bottom,100);var _generateLayout=generateLayout(data.length,chartW,chartH),coordinates=_generateLayout.coordinates,radius=_generateLayout.cellRadius;var innerRadius=0;var _dataTransform$summar=dataTransform(data).summary(),columnKeys=_dataTransform$summar.columnKeys,valueMax=_dataTransform$summar.valueMax;var valueExtent=[0,valueMax];var xScale=d3__namespace.scaleBand().domain(columnKeys).rangeRound([startAngle,endAngle]);var yScale=d3__namespace.scaleLinear().domain(valueExtent).range([innerRadius,radius]);var colorScale=d3__namespace.scaleOrdinal().domain(columnKeys).range(colors);var mainLayers=["title","chart","legend"];svg.classed("d3ez",true).attr("width",width).attr("height",height).selectAll("g").data(mainLayers).enter().append("g").attr("class",function(d){return d});var titleSelect=svg.select(".title");var chartSelect=svg.select(".chart");var legendSelect=svg.select(".legend");var chartLayers=["axis","seriesGroup"];chartSelect.classed(classed,true).attr("width",chartW).attr("height",chartH).attr("transform","translate(".concat(margin.left,",").concat(margin.top+titleH,")")).selectAll("g").data(chartLayers).enter().append("g").attr("class",function(d){return d});var componentPolarArea=component.polarArea().xScale(xScale).yScale(yScale).colorScale(colorScale).opacity(opacity).dispatch(dispatch).transition(transition);var componentCircularAxis=component.circularAxis().radialScale(xScale).ringScale(yScale);var componentCircularSectorLabels=component.circularSectorLabels().ringScale(yScale).radialScale(xScale).textAnchor("middle");var series=chartSelect.select(".seriesGroup").selectAll(".series").data(data);series.enter().append("g").classed("series",true).merge(series).attr("data-name",function(d){return d.key}).attr("transform",function(d,i){return"translate(".concat(coordinates[i].x,",").concat(coordinates[i].y,")")}).call(componentPolarArea);series.exit().remove();if(showAxis){var seriesAxis=chartSelect.select(".axis").selectAll(".seriesAxis").data(data);seriesAxis.enter().append("g").classed("seriesAxis",true).merge(seriesAxis).attr("transform",function(d,i){return"translate(".concat(coordinates[i].x,",").concat(coordinates[i].y,")")}).call(componentCircularAxis).call(componentCircularSectorLabels);seriesAxis.exit().remove()}else{chartSelect.selectAll(".axis").selectAll("*").remove()}if(title){var componentTitle=component.title().mainText(title).subText(subTitle);titleSelect.attr("transform","translate(".concat(width/2,",").concat(margin.top,")")).call(componentTitle)}else{titleSelect.selectAll("*").remove()}if(showLegend){var componentLegend=component.legend().colorScale(colorScale).height(legendH).width(legendW).itemType("rect").opacity(opacity);legendSelect.attr("transform","translate(".concat(margin.left+chartW+legendPad,",").concat(margin.top,")")).call(componentLegend)}else{legendSelect.selectAll("*").remove()}})}my.width=function(_v){if(!arguments.length)return width;width=_v;return this};my.height=function(_v){if(!arguments.length)return height;height=_v;return this};my.margin=function(_v){if(!arguments.length)return margin;margin=_v;return this};my.colors=function(_v){if(!arguments.length)return colors;colors=_v;return this};my.showAxis=function(_v){if(!arguments.length)return showAxis;showAxis=_v;return this};my.showLegend=function(_v){if(!arguments.length)return showLegend;showLegend=_v;return this};my.title=function(_v){if(!arguments.length)return title;title=_v;return this};my.subTitle=function(_v){if(!arguments.length)return subTitle;subTitle=_v;return this};my.opacity=function(_v){if(!arguments.length)return opacity;opacity=_v;return this};my.transition=function(_v){if(!arguments.length)return transition;transition=_v;return this};my.dispatch=function(_v){if(!arguments.length)return dispatch();dispatch=_v;return this};my.on=function(){var value=dispatch.on.apply(dispatch,arguments);return value===dispatch?my:value};return my}function chartPunchCard(){var classed="punchCard";var width=700;var height=400;var margin={top:40,right:40,bottom:70,left:70};var colors=[d3__namespace.rgb("steelblue").brighter(),d3__namespace.rgb("steelblue").darker()];var transition={ease:d3__namespace.easeLinear,duration:100};var dispatch=d3__namespace.dispatch("customValueMouseOver","customValueMouseOut","customValueClick","customSeriesMouseOver","customSeriesMouseOut","customSeriesClick");var title=null;var subTitle=null;var opacity=1;var showLegend=false;var showAxis=true;var minRadius=2;var maxRadius=20;var useGlobalScale=true;function my(selection){var svg=function(selection){var el=selection._groups[0][0];if(!!el.ownerSVGElement||el.tagName==="svg"){return selection}else{var svgSelection=selection.selectAll("svg").data(function(d){return[d]});return svgSelection.enter().append("svg").merge(svgSelection)}}(selection);selection.each(function(data){var legendW=showLegend?120:0;var legendH=Math.max(height/2.5,100);var legendPad=showLegend?15:0;var titleH=title?40:0;var chartW=Math.max(width-margin.left-legendPad-legendW-margin.right,100);var chartH=Math.max(height-margin.top-titleH-margin.bottom,100);var _dataTransform$summar=dataTransform(data).summary(),rowKeys=_dataTransform$summar.rowKeys,columnKeys=_dataTransform$summar.columnKeys,valueExtent=_dataTransform$summar.valueExtent;var xScale=d3__namespace.scaleBand().domain(columnKeys).range([0,chartW]).padding(.05);var yScale=d3__namespace.scaleBand().domain(rowKeys).range([0,chartH]).padding(.05);var colorScale=d3__namespace.scaleLinear().domain(valueExtent).range(colors);var sizeExtent=useGlobalScale?valueExtent:[0,d3__namespace.max(data[1].values,function(d){return d.value})];var sizeScale=d3__namespace.scaleLinear().domain(sizeExtent).range([minRadius,maxRadius]);var mainLayers=["title","chart","legend"];svg.classed("d3ez",true).attr("width",width).attr("height",height).selectAll("g").data(mainLayers).enter().append("g").attr("class",function(d){return d});var titleSelect=svg.select(".title");var chartSelect=svg.select(".chart");var legendSelect=svg.select(".legend");var chartLayers=["xAxis axis","yAxis axis","seriesGroup"];chartSelect.classed(classed,true).attr("width",chartW).attr("height",chartH).attr("transform","translate(".concat(margin.left,",").concat(margin.top+titleH,")")).selectAll("g").data(chartLayers).enter().append("g").attr("class",function(d){return d});var componentProportionalAreaCircles=component.proportionalAreaCircles().xScale(xScale).yScale(yScale).colorScale(colorScale).sizeScale(sizeScale).opacity(opacity).dispatch(dispatch).transition(transition);var series=chartSelect.select(".seriesGroup").selectAll(".series").data(data);series.enter().append("g").attr("class","series").merge(series).attr("data-name",function(d){return d.key}).attr("transform",function(d){return"translate(0,".concat(yScale(d.key),")")}).call(componentProportionalAreaCircles);series.exit().remove();var xAxis=d3__namespace.axisBottom(xScale);var yAxis=d3__namespace.axisLeft(yScale);if(showAxis){chartSelect.select(".xAxis").attr("transform","translate(0,".concat(chartH,")")).call(xAxis).selectAll("text").attr("y",0).attr("x",-8).attr("transform","rotate(300)").style("text-anchor","end");chartSelect.select(".yAxis").call(yAxis)}else{chartSelect.selectAll(".axis").selectAll("*").remove()}if(title){var componentTitle=component.title().mainText(title).subText(subTitle);titleSelect.attr("transform","translate(".concat(width/2,",").concat(margin.top,")")).call(componentTitle)}else{titleSelect.selectAll("*").remove()}if(showLegend){var componentLegend=component.legend().sizeScale(sizeScale).height(legendH).width(legendW).opacity(opacity);legendSelect.attr("transform","translate(".concat(margin.left+chartW+legendPad,",").concat(margin.top,")")).call(componentLegend)}else{legendSelect.selectAll("*").remove()}})}my.width=function(_v){if(!arguments.length)return width;width=_v;return this};my.height=function(_v){if(!arguments.length)return height;height=_v;return this};my.margin=function(_v){if(!arguments.length)return margin;margin=_v;return this};my.colors=function(_v){if(!arguments.length)return colors;colors=_v;return this};my.title=function(_v){if(!arguments.length)return title;title=_v;return this};my.subTitle=function(_v){if(!arguments.length)return subTitle;subTitle=_v;return this};my.opacity=function(_v){if(!arguments.length)return opacity;opacity=_v;return this};my.minRadius=function(_v){if(!arguments.length)return minRadius;minRadius=_v;return this};my.maxRadius=function(_v){if(!arguments.length)return maxRadius;maxRadius=_v;return this};my.useGlobalScale=function(_v){if(!arguments.length)return useGlobalScale;useGlobalScale=_v;return this};my.showAxis=function(_v){if(!arguments.length)return showAxis;showAxis=_v;return this};my.showLegend=function(_v){if(!arguments.length)return showLegend;showLegend=_v;return this};my.transition=function(_v){if(!arguments.length)return transition;transition=_v;return this};my.dispatch=function(_v){if(!arguments.length)return dispatch();dispatch=_v;return this};my.on=function(){var value=dispatch.on.apply(dispatch,arguments);return value===dispatch?my:value};return my}function chartRadarChart(){var classed="radarChart";var width=700;var height=400;var margin={top:40,right:40,bottom:40,left:40};var colors=palette.categorical(3);var transition={ease:d3__namespace.easeLinear,duration:100};var dispatch=d3__namespace.dispatch("customValueMouseOver","customValueMouseOut","customValueClick","customSeriesMouseOver","customSeriesMouseOut","customSeriesClick");var title=null;var subTitle=null;var opacity=1;var showLegend=false;var showAxis=true;var startAngle=0;var endAngle=360;function my(selection){var svg=function(selection){var el=selection._groups[0][0];if(!!el.ownerSVGElement||el.tagName==="svg"){return selection}else{var svgSelection=selection.selectAll("svg").data(function(d){return[d]});return svgSelection.enter().append("svg").merge(svgSelection)}}(selection);selection.each(function(data){var legendW=showLegend?120:0;var legendH=Math.max(height/2.5,100);var legendPad=showLegend?15:0;var titleH=title?40:0;var chartW=Math.max(width-margin.left-legendPad-legendW-margin.right,100);var chartH=Math.max(height-margin.top-titleH-margin.bottom,100);var radius=Math.min(chartW,chartH)/2.3;var _dataTransform$summar=dataTransform(data).summary(),rowKeys=_dataTransform$summar.rowKeys,columnKeys=_dataTransform$summar.columnKeys,valueMax=_dataTransform$summar.valueMax;var valueExtent=[0,valueMax];var xScale=d3__namespace.scalePoint().domain(columnKeys).range([startAngle,endAngle]);var yScale=d3__namespace.scaleLinear().domain(valueExtent).range([0,radius]).nice();var colorScale=d3__namespace.scaleOrdinal().domain(rowKeys).range(colors);var mainLayers=["title","chart","legend"];svg.classed("d3ez",true).attr("width",width).attr("height",height).selectAll("g").data(mainLayers).enter().append("g").attr("class",function(d){return d});var titleSelect=svg.select(".title");var chartSelect=svg.select(".chart");var legendSelect=svg.select(".legend");var chartLayers=["axis","seriesGroup"];chartSelect.classed(classed,true).attr("width",chartW).attr("height",chartH).attr("transform","translate(".concat(margin.left,",").concat(margin.top+titleH,")")).selectAll("g").data(chartLayers).enter().append("g").attr("class",function(d){return d});var componentRadarArea=component.radarArea().xScale(xScale).yScale(yScale).colorScale(colorScale).opacity(opacity).dispatch(dispatch).transition(transition);var componentCircularAxis=component.circularAxis().radialScale(xScale).ringScale(yScale).showAxis(false);var componentCircularSectorLabels=component.circularSectorLabels().ringScale(yScale).radialScale(xScale).textAnchor("middle");var series=chartSelect.select(".seriesGroup").selectAll(".series").data(data);series.enter().append("g").classed("series",true).merge(series).attr("data-name",function(d){return d.key}).attr("transform","translate(".concat(chartW/2,",").concat(chartH/2,")")).call(componentRadarArea);if(showAxis){chartSelect.select(".axis").attr("transform","translate(".concat(chartW/2,",").concat(chartH/2,")")).call(componentCircularSectorLabels).call(componentCircularAxis)}else{chartSelect.selectAll(".axis").selectAll("*").remove()}if(title){var componentTitle=component.title().mainText(title).subText(subTitle);titleSelect.attr("transform","translate(".concat(width/2,",").concat(margin.top,")")).call(componentTitle)}else{titleSelect.selectAll("*").remove()}if(showLegend){var componentLegend=component.legend().colorScale(colorScale).height(legendH).width(legendW).itemType("rect").opacity(opacity);legendSelect.attr("transform","translate(".concat(margin.left+chartW+legendPad,",").concat(margin.top,")")).call(componentLegend)}else{legendSelect.selectAll("*").remove()}})}my.width=function(_v){if(!arguments.length)return width;width=_v;return this};my.height=function(_v){if(!arguments.length)return height;height=_v;return this};my.margin=function(_v){if(!arguments.length)return margin;margin=_v;return this};my.colors=function(_v){if(!arguments.length)return colors;colors=_v;return this};my.showAxis=function(_v){if(!arguments.length)return showAxis;showAxis=_v;return this};my.showLegend=function(_v){if(!arguments.length)return showLegend;showLegend=_v;return this};my.title=function(_v){if(!arguments.length)return title;title=_v;return this};my.subTitle=function(_v){if(!arguments.length)return subTitle;subTitle=_v;return this};my.opacity=function(_v){if(!arguments.length)return opacity;opacity=_v;return this};my.transition=function(_v){if(!arguments.length)return transition;transition=_v;return this};my.dispatch=function(_v){if(!arguments.length)return dispatch();dispatch=_v;return this};my.on=function(){var value=dispatch.on.apply(dispatch,arguments);return value===dispatch?my:value};return my}function chartRoseChart(){var classed="roseChart";var width=700;var height=400;var margin={top:40,right:40,bottom:40,left:40};var colors=palette.categorical(3);var transition={ease:d3__namespace.easeLinear,duration:100};var dispatch=d3__namespace.dispatch("customValueMouseOver","customValueMouseOut","customValueClick","customSeriesMouseOver","customSeriesMouseOut","customSeriesClick");var title=null;var subTitle=null;var opacity=1;var showLegend=false;var showAxis=true;var stacked=true;function my(selection){var svg=function(selection){var el=selection._groups[0][0];if(!!el.ownerSVGElement||el.tagName==="svg"){return selection}else{var svgSelection=selection.selectAll("svg").data(function(d){return[d]});return svgSelection.enter().append("svg").merge(svgSelection)}}(selection);selection.each(function(data){var legendW=showLegend?120:0;var legendH=Math.max(height/2.5,100);var legendPad=showLegend?15:0;var titleH=title?40:0;var chartW=Math.max(width-margin.left-legendPad-legendW-margin.right,100);var chartH=Math.max(height-margin.top-titleH-margin.bottom,100);var radius=Math.min(chartW,chartH)/2.3;var innerRadius=0;var _dataTransform$summar=dataTransform(data).summary(),rowKeys=_dataTransform$summar.rowKeys,columnKeys=_dataTransform$summar.columnKeys,valueMin=_dataTransform$summar.valueMin,valueMax=_dataTransform$summar.valueMax,valueExtentStacked=_dataTransform$summar.valueExtentStacked;valueMax=stacked?valueExtentStacked[1]:valueMax;valueMin=0;var yDomain=[valueMin,valueMax];var xScale=d3__namespace.scaleBand().domain(rowKeys).rangeRound([0,360]);var yScale=d3__namespace.scaleLinear().domain(yDomain).range([innerRadius,radius]);var colorScale=d3__namespace.scaleOrdinal().domain(columnKeys).range(colors);var mainLayers=["title","chart","legend"];svg.classed("d3ez",true).attr("width",width).attr("height",height).selectAll("g").data(mainLayers).enter().append("g").attr("class",function(d){return d});var titleSelect=svg.select(".title");var chartSelect=svg.select(".chart");var legendSelect=svg.select(".legend");var chartLayers=["axis","seriesGroup"];chartSelect.classed(classed,true).attr("width",chartW).attr("height",chartH).attr("transform","translate(".concat(margin.left,",").concat(margin.top+titleH,")")).selectAll("g").data(chartLayers).enter().append("g").attr("class",function(d){return d});var componentRoseChartSector=component.roseChartSector().xScale(xScale).yScale(yScale).colorScale(colorScale).stacked(stacked).opacity(opacity).dispatch(dispatch).transition(transition);var componentCircularAxis=component.circularAxis().radialScale(xScale).ringScale(yScale);var componentCircularSectorLabels=component.circularSectorLabels().ringScale(yScale).radialScale(xScale).textAnchor("middle").capitalizeLabels(true);var series=chartSelect.select(".seriesGroup").selectAll(".series").data(data);series.enter().append("g").classed("series",true).merge(series).attr("data-name",function(d){return d.key}).attr("transform","translate(".concat(chartW/2,",").concat(chartH/2,")")).each(function(){d3__namespace.select(this).call(componentRoseChartSector)});series.exit().remove();if(showAxis){chartSelect.select(".axis").attr("transform","translate(".concat(chartW/2,",").concat(chartH/2,")")).call(componentCircularSectorLabels).call(componentCircularAxis)}else{chartSelect.selectAll(".axis").selectAll("*").remove()}if(title){var componentTitle=component.title().mainText(title).subText(subTitle);titleSelect.attr("transform","translate(".concat(width/2,",").concat(margin.top,")")).call(componentTitle)}else{titleSelect.selectAll("*").remove()}if(showLegend){var componentLegend=component.legend().colorScale(colorScale).height(legendH).width(legendW).itemType("rect").opacity(opacity);legendSelect.attr("transform","translate(".concat(margin.left+chartW+legendPad,",").concat(margin.top,")")).call(componentLegend)}else{legendSelect.selectAll("*").remove()}})}my.width=function(_v){if(!arguments.length)return width;width=_v;return this};my.height=function(_v){if(!arguments.length)return height;height=_v;return this};my.margin=function(_v){if(!arguments.length)return margin;margin=_v;return this};my.colors=function(_v){if(!arguments.length)return colors;colors=_v;return this};my.showAxis=function(_v){if(!arguments.length)return showAxis;showAxis=_v;return this};my.showLegend=function(_v){if(!arguments.length)return showLegend;showLegend=_v;return this};my.title=function(_v){if(!arguments.length)return title;title=_v;return this};my.subTitle=function(_v){if(!arguments.length)return subTitle;subTitle=_v;return this};my.opacity=function(_v){if(!arguments.length)return opacity;opacity=_v;return this};my.stacked=function(_v){if(!arguments.length)return stacked;stacked=_v;return this};my.transition=function(_v){if(!arguments.length)return transition;transition=_v;return this};my.dispatch=function(_v){if(!arguments.length)return dispatch();dispatch=_v;return this};my.on=function(){var value=dispatch.on.apply(dispatch,arguments);return value===dispatch?my:value};return my}var chart={barChartCircular:chartBarChartCircular,barChartHorizontal:chartBarChartHorizontal,barChartVertical:chartBarChartVertical,bubbleChart:chartBubbleChart,candlestickChart:chartCandlestickChart,donutChart:chartDonutChart,heatMap:chartHeatMap,heatMapRadial:chartHeatMapRadial,lineChart:chartLineChart,polarAreaChart:chartPolarAreaChart,punchCard:chartPunchCard,radarChart:chartRadarChart,roseChart:chartRoseChart};var author="James Saunders";var year=(new Date).getFullYear();var copyright="Copyright (C) ".concat(year," ").concat(author);var version=packageJson.version;var license=packageJson.license;var index={version:version,author:author,copyright:copyright,license:license,chart:chart,component:component,palette:palette,dataTransform:dataTransform};return index});
